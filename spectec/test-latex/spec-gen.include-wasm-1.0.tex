\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
& {\mathit{N}} &::=& {\mathit{nat}} \\
& {\mathit{M}} &::=& {\mathit{nat}} \\
& {\mathit{n}} &::=& {\mathit{nat}} \\
& {\mathit{m}} &::=& {\mathit{nat}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{Ki}} &=& 1024 &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{min}}(0, {\mathit{j}}) &=& 0 &  \\
{\mathrm{min}}({\mathit{i}}, 0) &=& 0 &  \\
{\mathrm{min}}({\mathit{i}} + 1, {\mathit{j}} + 1) &=& {\mathrm{min}}({\mathit{i}}, {\mathit{j}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{sum}}(\epsilon) &=& 0 &  \\
{\mathrm{sum}}({\mathit{n}}~\,{{\mathit{n}'}^\ast}) &=& {\mathit{n}} + {\mathrm{sum}}({{\mathit{n}'}^\ast}) &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{{\mathrm{concat}}}_{{\mathit{X}}}(\epsilon) &=& \epsilon &  \\
{{\mathrm{concat}}}_{{\mathit{X}}}(({{\mathit{w}}^\ast})~\,{({{\mathit{w}'}^\ast})^\ast}) &=& {{\mathit{w}}^\ast}~\,{{\mathrm{concat}}}_{{\mathit{X}}}({({{\mathit{w}'}^\ast})^\ast}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
& {\mathit{list}}({\mathit{A}}) &::=& {{\mathit{A}}^\ast} &\quad
  \mbox{if}~{|{{\mathit{A}}^\ast}|} < {2^{32}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(character)} & {\mathit{char}} &::=& \mathrm{U{+}00} ~|~ \dots ~|~ \mathrm{U{+}D7FF} ~|~ \mathrm{U{+}E000} ~|~ \dots ~|~ \mathrm{U{+}10FFFF} \\
\mbox{(name)} & {\mathit{name}} &::=& {{\mathit{char}}^\ast} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(byte)} & {\mathit{byte}} &::=& \mathtt{0x00} ~|~ \dots ~|~ \mathtt{0xFF} \\
\mbox{(unsigned integer)} & {{\mathit{u}}}{{\mathit{N}}} &::=& 0 ~|~ \dots ~|~ {2^{{\mathit{N}}}} - 1 \\
\mbox{(signed integer)} & {{\mathit{s}}}{{\mathit{N}}} &::=& {-{2^{{\mathit{N}} - 1}}} ~|~ \dots ~|~ {-1} ~|~ 0 ~|~ {+1} ~|~ \dots ~|~ {2^{{\mathit{N}} - 1}} - 1 \\
\mbox{(integer)} & {{\mathit{i}}}{{\mathit{N}}} &::=& {{\mathit{u}}}{{\mathit{N}}} \\
& {\mathit{u{\scriptstyle31}}} &::=& {{\mathit{u}}}{31} \\
& {\mathit{u{\scriptstyle32}}} &::=& {{\mathit{u}}}{32} \\
& {\mathit{u{\scriptstyle64}}} &::=& {{\mathit{u}}}{64} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{signif}}(32) &=& 23 &  \\
{\mathrm{signif}}(64) &=& 52 &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{expon}}(32) &=& 8 &  \\
{\mathrm{expon}}(64) &=& 11 &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathit{M}} &=& {\mathrm{signif}}({\mathit{N}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathit{E}} &=& {\mathrm{expon}}({\mathit{N}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(floating-point number)} & {{\mathit{f}}}{{\mathit{N}}} &::=& {+{{{\mathit{f}}}{{\mathit{N}}}}{{\mathit{mag}}}} ~|~ {-{{{\mathit{f}}}{{\mathit{N}}}}{{\mathit{mag}}}} \\
\mbox{(floating-point magnitude)} & {{{\mathit{f}}}{{\mathit{N}}}}{{\mathit{mag}}} &::=& (1 + {\mathit{m}} \cdot {2^{{-{\mathit{M}}}}}) \cdot {2^{{\mathit{n}}}} &\quad
  \mbox{if}~{\mathit{m}} < {2^{{\mathit{M}}}} \land 2 - {2^{{\mathit{E}} - 1}} \leq {\mathit{n}} \leq {2^{{\mathit{E}} - 1}} - 1 \\ &&|&
(0 + {\mathit{m}} \cdot {2^{{-{\mathit{M}}}}}) \cdot {2^{{\mathit{n}}}} &\quad
  \mbox{if}~{\mathit{m}} < {2^{{\mathit{M}}}} \land 2 - {2^{{\mathit{E}} - 1}} = {\mathit{n}} \\ &&|&
\infty \\ &&|&
{\mathsf{nan}}{({\mathit{m}})} &\quad
  \mbox{if}~1 \leq {\mathit{m}} < {2^{{\mathit{M}}}} \\
& {\mathit{f{\scriptstyle32}}} &::=& {{\mathit{f}}}{32} \\
& {\mathit{f{\scriptstyle64}}} &::=& {{\mathit{f}}}{64} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{+0} &=& {+((0 + 0 \cdot {2^{{-{\mathit{M}}}}}) \cdot {2^{{\mathit{n}}}})} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{+1} &=& {+((1 + 1 \cdot {2^{{-{\mathit{M}}}}}) \cdot {2^{0}})} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{{\mathrm{canon}}}_{{\mathit{N}}} &=& {2^{{\mathrm{signif}}({\mathit{N}}) - 1}} &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(index)} & {\mathit{idx}} &::=& {\mathit{u{\scriptstyle32}}} \\
\mbox{(type index)} & {\mathit{typeidx}} &::=& {\mathit{idx}} \\
\mbox{(function index)} & {\mathit{funcidx}} &::=& {\mathit{idx}} \\
\mbox{(global index)} & {\mathit{globalidx}} &::=& {\mathit{idx}} \\
\mbox{(table index)} & {\mathit{tableidx}} &::=& {\mathit{idx}} \\
\mbox{(memory index)} & {\mathit{memidx}} &::=& {\mathit{idx}} \\
\mbox{(label index)} & {\mathit{labelidx}} &::=& {\mathit{idx}} \\
\mbox{(local index)} & {\mathit{localidx}} &::=& {\mathit{idx}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(number type)} & {\mathit{valtype}} &::=& \mathsf{i{\scriptstyle32}} ~|~ \mathsf{i{\scriptstyle64}} ~|~ \mathsf{f{\scriptstyle32}} ~|~ \mathsf{f{\scriptstyle64}} \\
& {\mathsf{i}}{{\mathit{n}}} &::=& \mathsf{i{\scriptstyle32}} ~|~ \mathsf{i{\scriptstyle64}} \\
& {\mathsf{f}}{{\mathit{n}}} &::=& \mathsf{f{\scriptstyle32}} ~|~ \mathsf{f{\scriptstyle64}} \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(result type)} & {\mathit{resulttype}} &::=& {{\mathit{valtype}}^?} \\
& {\mathit{mut}} &::=& {\mathsf{mut}^?} \\
\mbox{(limits)} & {\mathit{limits}} &::=& {}[{\mathit{u{\scriptstyle32}}} .. {\mathit{u{\scriptstyle32}}}] \\
\mbox{(global type)} & {\mathit{globaltype}} &::=& {\mathit{mut}}~\,{\mathit{valtype}} \\
\mbox{(function type)} & {\mathit{functype}} &::=& {{\mathit{valtype}}^\ast} \rightarrow {{\mathit{valtype}}^\ast} \\
\mbox{(table type)} & {\mathit{tabletype}} &::=& {\mathit{limits}} \\
\mbox{(memory type)} & {\mathit{memtype}} &::=& {\mathit{limits}} \\
\mbox{(external type)} & {\mathit{externtype}} &::=& \mathsf{func}~\,{\mathit{functype}} ~|~ \mathsf{global}~\,{\mathit{globaltype}} ~|~ \mathsf{table}~\,{\mathit{tabletype}} ~|~ \mathsf{mem}~\,{\mathit{memtype}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
& {{\mathit{val}}}_{{\mathsf{i}}{{\mathit{n}}}} &::=& {{\mathit{i}}}{{|{\mathsf{i}}{{\mathit{n}}}|}} \\
& {{\mathit{val}}}_{{\mathsf{f}}{{\mathit{n}}}} &::=& {{\mathit{f}}}{{|{\mathsf{f}}{{\mathit{n}}}|}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(signedness)} & {\mathit{sx}} &::=& \mathsf{u} ~|~ \mathsf{s} \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
& {{\mathit{unop}}}_{{\mathsf{i}}{{\mathit{n}}}} &::=& \mathsf{clz} ~|~ \mathsf{ctz} ~|~ \mathsf{popcnt} \\
& {{\mathit{unop}}}_{{\mathsf{f}}{{\mathit{n}}}} &::=& \mathsf{abs} ~|~ \mathsf{neg} ~|~ \mathsf{sqrt} ~|~ \mathsf{ceil} ~|~ \mathsf{floor} ~|~ \mathsf{trunc} ~|~ \mathsf{nearest} \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
& {{\mathit{binop}}}_{{\mathsf{i}}{{\mathit{n}}}} &::=& \mathsf{add} ~|~ \mathsf{sub} ~|~ \mathsf{mul} ~|~ {\mathsf{div\_}}{{\mathit{sx}}} ~|~ {\mathsf{rem\_}}{{\mathit{sx}}} \\ &&|&
\mathsf{and} ~|~ \mathsf{or} ~|~ \mathsf{xor} ~|~ \mathsf{shl} ~|~ {\mathsf{shr\_}}{{\mathit{sx}}} ~|~ \mathsf{rotl} ~|~ \mathsf{rotr} \\
& {{\mathit{binop}}}_{{\mathsf{f}}{{\mathit{n}}}} &::=& \mathsf{add} ~|~ \mathsf{sub} ~|~ \mathsf{mul} ~|~ \mathsf{div} ~|~ \mathsf{min} ~|~ \mathsf{max} ~|~ \mathsf{copysign} \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
& {{\mathit{testop}}}_{{\mathsf{i}}{{\mathit{n}}}} &::=& \mathsf{eqz} \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
& {{\mathit{relop}}}_{{\mathsf{i}}{{\mathit{n}}}} &::=& \mathsf{eq} ~|~ \mathsf{ne} ~|~ {\mathsf{lt\_}}{{\mathit{sx}}} ~|~ {\mathsf{gt\_}}{{\mathit{sx}}} ~|~ {\mathsf{le\_}}{{\mathit{sx}}} ~|~ {\mathsf{ge\_}}{{\mathit{sx}}} \\
& {{\mathit{relop}}}_{{\mathsf{f}}{{\mathit{n}}}} &::=& \mathsf{eq} ~|~ \mathsf{ne} ~|~ \mathsf{lt} ~|~ \mathsf{gt} ~|~ \mathsf{le} ~|~ \mathsf{ge} \\
& {\mathit{cvtop}} &::=& \mathsf{convert} ~|~ \mathsf{reinterpret} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(memory operator)} & {\mathit{memop}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{align}~\,{\mathit{u{\scriptstyle32}}},\; \mathsf{offset}~\,{\mathit{u{\scriptstyle32}}} \;\}\end{array} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(block type)} & {\mathit{blocktype}} &::=& {{\mathit{valtype}}^?} \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(instruction)} & {\mathit{instr}} &::=& \mathsf{unreachable} \\ &&|&
\mathsf{nop} \\ &&|&
\mathsf{drop} \\ &&|&
\mathsf{select}~\,{({{\mathit{valtype}}^\ast})^?} \\ &&|&
\mathsf{block}~\,{\mathit{blocktype}}~\,{{\mathit{instr}}^\ast} \\ &&|&
\mathsf{loop}~\,{\mathit{blocktype}}~\,{{\mathit{instr}}^\ast} \\ &&|&
\mathsf{if}~\,{\mathit{blocktype}}~\,{{\mathit{instr}}^\ast}~\,\mathsf{else}~\,{{\mathit{instr}}^\ast} \\ &&|&
\mathsf{br}~\,{\mathit{labelidx}} \\ &&|&
\mathsf{br\_if}~\,{\mathit{labelidx}} \\ &&|&
\mathsf{br\_table}~\,{{\mathit{labelidx}}^\ast}~\,{\mathit{labelidx}} \\ &&|&
\mathsf{call}~\,{\mathit{funcidx}} \\ &&|&
\mathsf{call\_indirect}~\,{\mathit{typeidx}} \\ &&|&
\mathsf{return} \\ &&|&
{\mathit{valtype}}.\mathsf{const}~\,{{\mathit{val}}}_{{\mathit{valtype}}} \\ &&|&
{\mathit{valtype}} . {{\mathit{unop}}}_{{\mathit{valtype}}} \\ &&|&
{\mathit{valtype}} . {{\mathit{binop}}}_{{\mathit{valtype}}} \\ &&|&
{\mathit{valtype}} . {{\mathit{testop}}}_{{\mathit{valtype}}} \\ &&|&
{\mathit{valtype}} . {{\mathit{relop}}}_{{\mathit{valtype}}} \\ &&|&
{\mathit{valtype}}_{{1}} . {{{{{\mathit{cvtop}}}{\mathsf{\_}}}{{\mathit{valtype}}_{{2}}}}{\mathsf{\_}}}{{{\mathit{sx}}^?}} \\ &&|&
\mathsf{local.get}~\,{\mathit{localidx}} \\ &&|&
\mathsf{local.set}~\,{\mathit{localidx}} \\ &&|&
\mathsf{local.tee}~\,{\mathit{localidx}} \\ &&|&
\mathsf{global.get}~\,{\mathit{globalidx}} \\ &&|&
\mathsf{global.set}~\,{\mathit{globalidx}} \\ &&|&
\mathsf{memory.size} \\ &&|&
\mathsf{memory.grow} \\ &&|&
{{\mathit{valtype}}.\mathsf{load}}{{({\mathit{n}}~\,\mathsf{\_}~\,{\mathit{sx}})^?}}~\,{\mathit{memop}} \\ &&|&
{{\mathit{valtype}}.\mathsf{store}}{{{\mathit{n}}^?}}~\,{\mathit{memop}} \\
\mbox{(expression)} & {\mathit{expr}} &::=& {{\mathit{instr}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(type)} & {\mathit{type}} &::=& \mathsf{type}~\,{\mathit{functype}} \\
\mbox{(local)} & {\mathit{local}} &::=& \mathsf{local}~\,{\mathit{valtype}} \\
\mbox{(function)} & {\mathit{func}} &::=& \mathsf{func}~\,{\mathit{typeidx}}~\,{{\mathit{local}}^\ast}~\,{\mathit{expr}} \\
\mbox{(global)} & {\mathit{global}} &::=& \mathsf{global}~\,{\mathit{globaltype}}~\,{\mathit{expr}} \\
\mbox{(table)} & {\mathit{table}} &::=& \mathsf{table}~\,{\mathit{tabletype}} \\
\mbox{(memory)} & {\mathit{mem}} &::=& \mathsf{memory}~\,{\mathit{memtype}} \\
\mbox{(table segment)} & {\mathit{elem}} &::=& \mathsf{elem}~\,{\mathit{expr}}~\,{{\mathit{funcidx}}^\ast} \\
\mbox{(memory segment)} & {\mathit{data}} &::=& \mathsf{data}~\,{\mathit{expr}}~\,{{\mathit{byte}}^\ast} \\
\mbox{(start function)} & {\mathit{start}} &::=& \mathsf{start}~\,{\mathit{funcidx}} \\
\mbox{(external index)} & {\mathit{externidx}} &::=& \mathsf{func}~\,{\mathit{funcidx}} ~|~ \mathsf{global}~\,{\mathit{globalidx}} ~|~ \mathsf{table}~\,{\mathit{tableidx}} ~|~ \mathsf{mem}~\,{\mathit{memidx}} \\
\mbox{(export)} & {\mathit{export}} &::=& \mathsf{export}~\,{\mathit{name}}~\,{\mathit{externidx}} \\
\mbox{(import)} & {\mathit{import}} &::=& \mathsf{import}~\,{\mathit{name}}~\,{\mathit{name}}~\,{\mathit{externtype}} \\
\mbox{(module)} & {\mathit{module}} &::=& \mathsf{module}~\,{{\mathit{type}}^\ast}~\,{{\mathit{import}}^\ast}~\,{{\mathit{func}}^\ast}~\,{{\mathit{global}}^\ast}~\,{{\mathit{table}}^\ast}~\,{{\mathit{mem}}^\ast}~\,{{\mathit{elem}}^\ast}~\,{{\mathit{data}}^\ast}~\,{{\mathit{start}}^\ast}~\,{{\mathit{export}}^\ast} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{|\mathsf{i{\scriptstyle32}}|} &=& 32 &  \\
{|\mathsf{i{\scriptstyle64}}|} &=& 64 &  \\
{|\mathsf{f{\scriptstyle32}}|} &=& 32 &  \\
{|\mathsf{f{\scriptstyle64}}|} &=& 64 &  \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
 &=& \{ \begin{array}[t]{@{}l@{}}
\mathsf{align}~\,0,\; \mathsf{offset}~\,0 \}\end{array} &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{{\mathrm{signed}}}_{{\mathit{N}}}({\mathit{i}}) &=& {\mathit{i}} &\quad
  \mbox{if}~0 \leq {2^{{\mathit{N}} - 1}} \\
{{\mathrm{signed}}}_{{\mathit{N}}}({\mathit{i}}) &=& {\mathit{i}} - {2^{{\mathit{N}}}} &\quad
  \mbox{if}~{2^{{\mathit{N}} - 1}} \leq {\mathit{i}} < {2^{{\mathit{N}}}} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{{{{{\mathrm{signed}}^{{-1}}}}{}}_{{\mathit{N}}}}{{{\mathit{i}}}} &=& {\mathit{j}} &\quad
  \mbox{if}~{{\mathrm{signed}}}_{{\mathit{N}}}({\mathit{j}}) = {{\mathit{i}}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{invibytes}}({\mathit{N}}, {{\mathit{b}}^\ast}) &=& {\mathit{n}} &\quad
  \mbox{if}~{{\mathrm{bytes}}}_{{{\mathit{i}}}{{\mathit{N}}}}({\mathit{n}}) = {{\mathit{b}}^\ast} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{invfbytes}}({\mathit{N}}, {{\mathit{b}}^\ast}) &=& {\mathit{p}} &\quad
  \mbox{if}~{{\mathrm{bytes}}}_{{{\mathit{f}}}{{\mathit{N}}}}({\mathit{p}}) = {{\mathit{b}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{add}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{iadd}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{sub}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{isub}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{mul}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{imul}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{div\_}}{{\mathit{sx}}}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{idiv}}~\,{{|{\mathsf{i}}{{\mathit{n}}}|}^{{\mathit{sx}}}}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{rem\_}}{{\mathit{sx}}}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{irem}}~\,{{|{\mathsf{i}}{{\mathit{n}}}|}^{{\mathit{sx}}}}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{and}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{iand}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{or}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ior}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{xor}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ixor}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{shl}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ishl}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{shr\_}}{{\mathit{sx}}}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ishr}}~\,{{|{\mathsf{i}}{{\mathit{n}}}|}^{{\mathit{sx}}}}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{rotl}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{irotl}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{rotr}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{irotr}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{unop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{clz}, {\mathit{iN}}) &=& {\mathrm{iclz}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}) &  \\
{\mathrm{unop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{ctz}, {\mathit{iN}}) &=& {\mathrm{iclz}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}) &  \\
{\mathrm{unop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{popcnt}, {\mathit{iN}}) &=& {\mathrm{ipopcnt}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{testop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{eqz}, {\mathit{iN}}) &=& {\mathrm{ieqz}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{relop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{eq}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ieq}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{i}}{{\mathit{n}}}, \mathsf{ne}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ine}}~\,{|{\mathsf{i}}{{\mathit{n}}}|}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{lt\_}}{{\mathit{sx}}}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ilt}}~\,{{|{\mathsf{i}}{{\mathit{n}}}|}^{{\mathit{sx}}}}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{gt\_}}{{\mathit{sx}}}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ilt}}~\,{{|{\mathsf{i}}{{\mathit{n}}}|}^{{\mathit{sx}}}}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{le\_}}{{\mathit{sx}}}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ile}}~\,{{|{\mathsf{i}}{{\mathit{n}}}|}^{{\mathit{sx}}}}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{ge\_}}{{\mathit{sx}}}, {\mathit{iN}}_{{1}}, {\mathit{iN}}_{{2}}) &=& {\mathrm{ihe}}~\,{{|{\mathsf{i}}{{\mathit{n}}}|}^{{\mathit{sx}}}}~\,({\mathit{iN}}_{{1}},\, {\mathit{iN}}_{{2}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{binop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{add}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fadd}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{sub}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fsub}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{mul}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fmul}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{div}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fdiv}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{min}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fmin}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{max}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fmax}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{binop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{copysign}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fcopysign}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{unop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{abs}, {\mathit{fN}}) &=& {\mathrm{fabs}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}) &  \\
{\mathrm{unop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{neg}, {\mathit{fN}}) &=& {\mathrm{fneg}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}) &  \\
{\mathrm{unop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{sqrt}, {\mathit{fN}}) &=& {\mathrm{fsqrt}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}) &  \\
{\mathrm{unop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{ceil}, {\mathit{fN}}) &=& {\mathrm{fceil}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}) &  \\
{\mathrm{unop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{floor}, {\mathit{fN}}) &=& {\mathrm{ffloor}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}) &  \\
{\mathrm{unop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{trunc}, {\mathit{fN}}) &=& {\mathrm{ftrunc}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}) &  \\
{\mathrm{unop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{nearest}, {\mathit{fN}}) &=& {\mathrm{fnearest}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{relop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{eq}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{feq}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{ne}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fne}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{lt}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{flt}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{gt}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fgt}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{le}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fle}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
{\mathrm{relop}}({\mathsf{f}}{{\mathit{n}}}, \mathsf{ge}, {\mathit{fN}}_{{1}}, {\mathit{fN}}_{{2}}) &=& {\mathrm{fge}}~\,{|{\mathsf{f}}{{\mathit{n}}}|}~\,({\mathit{fN}}_{{1}},\, {\mathit{fN}}_{{2}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{cvtop}}(\mathsf{i{\scriptstyle32}}, \mathsf{i{\scriptstyle64}}, \mathsf{convert}, {\mathit{sx}}, {\mathit{iN}}) &=& {{{{\mathrm{ext}}}_{(32,\, 64)}^{{\mathit{sx}}}}}{({\mathit{iN}})} &  \\
{\mathrm{cvtop}}(\mathsf{i{\scriptstyle64}}, \mathsf{i{\scriptstyle32}}, \mathsf{convert}, {{\mathit{sx}}^?}, {\mathit{iN}}) &=& {{{\mathrm{wrap}}}_{(64,\, 32)}}{({\mathit{iN}})} &  \\
{\mathrm{cvtop}}({\mathsf{f}}{{\mathit{n}}}, {\mathsf{i}}{{\mathit{n}}}, \mathsf{convert}, {\mathit{sx}}, {\mathit{fN}}) &=& {{{{\mathrm{trunc}}}_{({|{\mathsf{f}}{{\mathit{n}}}|},\, {|{\mathsf{i}}{{\mathit{n}}}|})}^{{\mathit{sx}}}}}{({\mathit{fN}})} &  \\
{\mathrm{cvtop}}(\mathsf{f{\scriptstyle32}}, \mathsf{f{\scriptstyle64}}, \mathsf{convert}, {{\mathit{sx}}^?}, {\mathit{fN}}) &=& {{{\mathrm{promote}}}_{(32,\, 64)}}{({\mathit{fN}})} &  \\
{\mathrm{cvtop}}(\mathsf{f{\scriptstyle64}}, \mathsf{f{\scriptstyle32}}, \mathsf{convert}, {{\mathit{sx}}^?}, {\mathit{fN}}) &=& {{{\mathrm{demote}}}_{(64,\, 32)}}{({\mathit{fN}})} &  \\
{\mathrm{cvtop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{f}}{{\mathit{n}}}, \mathsf{convert}, {\mathit{sx}}, {\mathit{iN}}) &=& {{{{\mathrm{convert}}}_{({|{\mathsf{i}}{{\mathit{n}}}|},\, {|{\mathsf{f}}{{\mathit{n}}}|})}^{{\mathit{sx}}}}}{({\mathit{iN}})} &  \\
{\mathrm{cvtop}}({\mathsf{i}}{{\mathit{n}}}, {\mathsf{f}}{{\mathit{n}}}, \mathsf{reinterpret}, {{\mathit{sx}}^?}, {\mathit{iN}}) &=& {{{\mathrm{narrow}}}_{({\mathsf{i}}{{\mathit{n}}},\, {\mathsf{f}}{{\mathit{n}}})}}{{\mathit{iN}}} &\quad
  \mbox{if}~{|{\mathsf{i}}{{\mathit{n}}}|} = {|{\mathsf{f}}{{\mathit{n}}}|} \\
{\mathrm{cvtop}}({\mathsf{f}}{{\mathit{n}}}, {\mathsf{i}}{{\mathit{n}}}, \mathsf{reinterpret}, {{\mathit{sx}}^?}, {\mathit{fN}}) &=& {{{\mathrm{narrow}}}_{({\mathsf{f}}{{\mathit{n}}},\, {\mathsf{i}}{{\mathit{n}}})}}{{\mathit{fN}}} &\quad
  \mbox{if}~{|{\mathsf{i}}{{\mathit{n}}}|} = {|{\mathsf{f}}{{\mathit{n}}}|} \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(address)} & {\mathit{addr}} &::=& {\mathit{nat}} \\
\mbox{(function address)} & {\mathit{funcaddr}} &::=& {\mathit{addr}} \\
\mbox{(global address)} & {\mathit{globaladdr}} &::=& {\mathit{addr}} \\
\mbox{(table address)} & {\mathit{tableaddr}} &::=& {\mathit{addr}} \\
\mbox{(memory address)} & {\mathit{memaddr}} &::=& {\mathit{addr}} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(value)} & {\mathit{val}} &::=& {\mathit{valtype}}.\mathsf{const}~\,{{\mathit{val}}}_{{\mathit{valtype}}} \\
\mbox{(result)} & {\mathit{result}} &::=& {{\mathit{val}}^\ast} ~|~ \mathsf{trap} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(external value)} & {\mathit{externval}} &::=& \mathsf{func}~\,{\mathit{funcaddr}} ~|~ \mathsf{global}~\,{\mathit{globaladdr}} ~|~ \mathsf{table}~\,{\mathit{tableaddr}} ~|~ \mathsf{mem}~\,{\mathit{memaddr}} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(function instance)} & {\mathit{funcinst}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{type}~\,{\mathit{functype}},\; \\
  \mathsf{module}~\,{\mathit{moduleinst}},\; \\
  \mathsf{code}~\,{\mathit{func}} \;\}\end{array} \\
\mbox{(global instance)} & {\mathit{globalinst}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{type}~\,{\mathit{globaltype}},\; \\
  \mathsf{value}~\,{\mathit{val}} \;\}\end{array} \\
\mbox{(table instance)} & {\mathit{tableinst}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{type}~\,{\mathit{tabletype}},\; \\
  \mathsf{elem}~\,{({{\mathit{funcaddr}}^?})^\ast} \;\}\end{array} \\
\mbox{(memory instance)} & {\mathit{meminst}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{type}~\,{\mathit{memtype}},\; \\
  \mathsf{data}~\,{{\mathit{byte}}^\ast} \;\}\end{array} \\
\mbox{(export instance)} & {\mathit{exportinst}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{name}~\,{\mathit{name}},\; \\
  \mathsf{value}~\,{\mathit{externval}} \;\}\end{array} \\
\mbox{(module instance)} & {\mathit{moduleinst}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{type}~\,{{\mathit{functype}}^\ast},\; \\
  \mathsf{func}~\,{{\mathit{funcaddr}}^\ast},\; \\
  \mathsf{global}~\,{{\mathit{globaladdr}}^\ast},\; \\
  \mathsf{table}~\,{{\mathit{tableaddr}}^\ast},\; \\
  \mathsf{mem}~\,{{\mathit{memaddr}}^\ast},\; \\
  \mathsf{export}~\,{{\mathit{exportinst}}^\ast} \;\}\end{array} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(store)} & {\mathit{store}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{func}~\,{{\mathit{funcinst}}^\ast},\; \\
  \mathsf{global}~\,{{\mathit{globalinst}}^\ast},\; \\
  \mathsf{table}~\,{{\mathit{tableinst}}^\ast},\; \\
  \mathsf{mem}~\,{{\mathit{meminst}}^\ast} \;\}\end{array} \\
\mbox{(frame)} & {\mathit{frame}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{local}~\,{{\mathit{val}}^\ast},\; \\
  \mathsf{module}~\,{\mathit{moduleinst}} \;\}\end{array} \\
\mbox{(state)} & {\mathit{state}} &::=& {\mathit{store}} ; {\mathit{frame}} \\
\mbox{(configuration)} & {\mathit{config}} &::=& {\mathit{state}} ; {{\mathit{instr}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(administrative instruction)} & {\mathit{instr}} &::=& {\mathit{instr}} \\ &&|&
\mathsf{call}~\,{\mathit{funcaddr}} \\ &&|&
{{\mathsf{label}}_{{\mathit{n}}}}{\{{{\mathit{instr}}^\ast}\}}~\,{{\mathit{instr}}^\ast} \\ &&|&
{{\mathsf{frame}}_{{\mathit{n}}}}{\{{\mathit{frame}}\}}~\,{{\mathit{instr}}^\ast} \\ &&|&
\mathsf{trap} \\
\mbox{(evaluation context)} & {\mathit{E}} &::=& {}[\mathsf{\_}] \\ &&|&
{{\mathit{val}}^\ast}~\,{\mathit{E}}~\,{{\mathit{instr}}^\ast} \\ &&|&
{{\mathsf{label}}_{{\mathit{n}}}}{\{{{\mathit{instr}}^\ast}\}}~\,{\mathit{E}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{default}}~\,\mathsf{i{\scriptstyle32}} &=& (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,0) &  \\
{\mathrm{default}}~\,\mathsf{i{\scriptstyle64}} &=& (\mathsf{i{\scriptstyle64}}.\mathsf{const}~\,0) &  \\
{\mathrm{default}}~\,\mathsf{f{\scriptstyle32}} &=& (\mathsf{f{\scriptstyle32}}.\mathsf{const}~\,{+0}) &  \\
{\mathrm{default}}~\,\mathsf{f{\scriptstyle64}} &=& (\mathsf{f{\scriptstyle64}}.\mathsf{const}~\,{+0}) &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{funcs}}(\epsilon) &=& \epsilon &  \\
{\mathrm{funcs}}((\mathsf{func}~\,{\mathit{fa}})~\,{{\mathit{xv}}^\ast}) &=& {\mathit{fa}}~\,{\mathrm{funcs}}({{\mathit{xv}}^\ast}) &  \\
{\mathrm{funcs}}({\mathit{externval}}~\,{{\mathit{xv}}^\ast}) &=& {\mathrm{funcs}}({{\mathit{xv}}^\ast}) &\quad
  \mbox{otherwise} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{globals}}(\epsilon) &=& \epsilon &  \\
{\mathrm{globals}}((\mathsf{global}~\,{\mathit{ga}})~\,{{\mathit{xv}}^\ast}) &=& {\mathit{ga}}~\,{\mathrm{globals}}({{\mathit{xv}}^\ast}) &  \\
{\mathrm{globals}}({\mathit{externval}}~\,{{\mathit{xv}}^\ast}) &=& {\mathrm{globals}}({{\mathit{xv}}^\ast}) &\quad
  \mbox{otherwise} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{tables}}(\epsilon) &=& \epsilon &  \\
{\mathrm{tables}}((\mathsf{table}~\,{\mathit{ta}})~\,{{\mathit{xv}}^\ast}) &=& {\mathit{ta}}~\,{\mathrm{tables}}({{\mathit{xv}}^\ast}) &  \\
{\mathrm{tables}}({\mathit{externval}}~\,{{\mathit{xv}}^\ast}) &=& {\mathrm{tables}}({{\mathit{xv}}^\ast}) &\quad
  \mbox{otherwise} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{mems}}(\epsilon) &=& \epsilon &  \\
{\mathrm{mems}}((\mathsf{mem}~\,{\mathit{ma}})~\,{{\mathit{xv}}^\ast}) &=& {\mathit{ma}}~\,{\mathrm{mems}}({{\mathit{xv}}^\ast}) &  \\
{\mathrm{mems}}({\mathit{externval}}~\,{{\mathit{xv}}^\ast}) &=& {\mathrm{mems}}({{\mathit{xv}}^\ast}) &\quad
  \mbox{otherwise} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{store} &=& {\mathit{s}} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{frame} &=& {\mathit{f}} &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{module}.\mathsf{func} &=& {\mathit{f}}.\mathsf{module}.\mathsf{func} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{func} &=& {\mathit{s}}.\mathsf{func} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{global} &=& {\mathit{s}}.\mathsf{global} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{table} &=& {\mathit{s}}.\mathsf{table} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{mem} &=& {\mathit{s}}.\mathsf{mem} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{module} &=& {\mathit{f}}.\mathsf{module} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}).\mathsf{type}~\,{}[{\mathit{x}}] &=& {\mathit{f}}.\mathsf{module}.\mathsf{type}{}[{\mathit{x}}] &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{({\mathit{s}} ; {\mathit{f}}).\mathsf{func}}{{}[{\mathit{x}}]} &=& {\mathit{s}}.\mathsf{func}{}[{\mathit{f}}.\mathsf{module}.\mathsf{func}{}[{\mathit{x}}]] &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{({\mathit{s}} ; {\mathit{f}}).\mathsf{global}}{{}[{\mathit{x}}]} &=& {\mathit{s}}.\mathsf{global}{}[{\mathit{f}}.\mathsf{module}.\mathsf{global}{}[{\mathit{x}}]] &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{({\mathit{s}} ; {\mathit{f}}).\mathsf{table}}{{}[{\mathit{x}}]} &=& {\mathit{s}}.\mathsf{table}{}[{\mathit{f}}.\mathsf{module}.\mathsf{table}{}[{\mathit{x}}]] &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{({\mathit{s}} ; {\mathit{f}}).\mathsf{mem}}{{}[{\mathit{x}}]} &=& {\mathit{s}}.\mathsf{mem}{}[{\mathit{f}}.\mathsf{module}.\mathsf{mem}{}[{\mathit{x}}]] &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{({\mathit{s}} ; {\mathit{f}}).\mathsf{local}}{{}[{\mathit{x}}]} &=& {\mathit{f}}.\mathsf{local}{}[{\mathit{x}}] &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}){}[\mathsf{local}{}[{\mathit{x}}] = {\mathit{v}}] &=& {\mathit{s}} ; {\mathit{f}}{}[\mathsf{local}{}[{\mathit{x}}] = {\mathit{v}}] &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}){}[\mathsf{global}{}[{\mathit{x}}].\mathsf{value} = {\mathit{v}}] &=& {\mathit{s}}{}[\mathsf{global}{}[{\mathit{f}}.\mathsf{module}.\mathsf{global}{}[{\mathit{x}}]].\mathsf{value} = {\mathit{v}}] ; {\mathit{f}} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}){}[\mathsf{table}{}[{\mathit{x}}].\mathsf{elem}{}[{\mathit{i}}] = {\mathit{a}}] &=& {\mathit{s}}{}[\mathsf{table}{}[{\mathit{f}}.\mathsf{module}.\mathsf{table}{}[{\mathit{x}}]].\mathsf{elem}{}[{\mathit{i}}] = {\mathit{a}}] ; {\mathit{f}} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}){}[\mathsf{table}{}[{\mathit{x}}] = {\mathit{ti}}] &=& {\mathit{s}}{}[\mathsf{table}{}[{\mathit{f}}.\mathsf{module}.\mathsf{table}{}[{\mathit{x}}]] = {\mathit{ti}}] ; {\mathit{f}} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}){}[\mathsf{mem}{}[{\mathit{x}}].\mathsf{data}{}[{\mathit{i}} : {\mathit{j}}] = {{\mathit{b}}^\ast}] &=& {\mathit{s}}{}[\mathsf{mem}{}[{\mathit{f}}.\mathsf{module}.\mathsf{mem}{}[{\mathit{x}}]].\mathsf{data}{}[{\mathit{i}} : {\mathit{j}}] = {{\mathit{b}}^\ast}] ; {\mathit{f}} &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
({\mathit{s}} ; {\mathit{f}}){}[\mathsf{mem}{}[{\mathit{x}}] = {\mathit{mi}}] &=& {\mathit{s}}{}[\mathsf{mem}{}[{\mathit{f}}.\mathsf{module}.\mathsf{mem}{}[{\mathit{x}}]] = {\mathit{mi}}] ; {\mathit{f}} &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{growtable}}({\mathit{ti}}, {\mathit{n}}) &=& {\mathit{ti}'} &\quad
  \mbox{if}~{\mathit{ti}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{}[{\mathit{i}} .. {\mathit{j}}],\; \mathsf{elem}~\,{{\mathit{a}}^\ast} \}\end{array} \\
 &&&\quad {\land}~{\mathit{i}'} = {|{{\mathit{a}}^\ast}|} + {\mathit{n}} \\
 &&&\quad {\land}~{\mathit{ti}'} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{}[{\mathit{i}'} .. {\mathit{j}}],\; \mathsf{elem}~\,{{\mathit{a}}^\ast}~\,{\epsilon^{{\mathit{n}}}} \}\end{array} \\
 &&&\quad {\land}~{\mathit{i}'} \leq {\mathit{j}} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{growmemory}}({\mathit{mi}}, {\mathit{n}}) &=& {\mathit{mi}'} &\quad
  \mbox{if}~{\mathit{mi}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{}[{\mathit{i}} .. {\mathit{j}}],\; \mathsf{data}~\,{{\mathit{b}}^\ast} \}\end{array} \\
 &&&\quad {\land}~{\mathit{i}'} = {|{{\mathit{b}}^\ast}|} / (64 \cdot {\mathrm{Ki}}) + {\mathit{n}} \\
 &&&\quad {\land}~{\mathit{mi}'} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{}[{\mathit{i}'} .. {\mathit{j}}],\; \mathsf{data}~\,{{\mathit{b}}^\ast}~\,{0^{{\mathit{n}} \cdot 64 \cdot {\mathrm{Ki}}}} \}\end{array} \\
 &&&\quad {\land}~{\mathit{i}'} \leq {\mathit{j}} \\
\end{array}
$$

$$
\begin{array}{@{}lrrl@{}l@{}}
\mbox{(context)} & {\mathit{context}} &::=& \{\; \begin{array}[t]{@{}l@{}l@{}}
\mathsf{type}~\,{{\mathit{functype}}^\ast},\; \mathsf{func}~\,{{\mathit{functype}}^\ast},\; \mathsf{global}~\,{{\mathit{globaltype}}^\ast},\; \mathsf{table}~\,{{\mathit{tabletype}}^\ast},\; \mathsf{mem}~\,{{\mathit{memtype}}^\ast},\; \\
  \mathsf{local}~\,{{\mathit{valtype}}^\ast},\; \mathsf{label}~\,{{\mathit{resulttype}}^\ast},\; \mathsf{return}~\,{{\mathit{resulttype}}^?} \;\}\end{array} \\
\end{array}
$$

\vspace{1ex}

$\boxed{{ \vdash }\;{\mathit{limits}} : {\mathit{nat}}}$

$\boxed{{ \vdash }\;{\mathit{functype}} : \mathsf{ok}}$

$\boxed{{ \vdash }\;{\mathit{globaltype}} : \mathsf{ok}}$

$\boxed{{ \vdash }\;{\mathit{tabletype}} : \mathsf{ok}}$

$\boxed{{ \vdash }\;{\mathit{memtype}} : \mathsf{ok}}$

$\boxed{{ \vdash }\;{\mathit{externtype}} : \mathsf{ok}}$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{n}}_{{1}} \leq {\mathit{n}}_{{2}} \leq {\mathit{k}}
}{
{ \vdash }\;{}[{\mathit{n}}_{{1}} .. {\mathit{n}}_{{2}}] : {\mathit{k}}
} \, {[\textsc{\scriptsize K{-}limits}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{ \vdash }\;{{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^?} : \mathsf{ok}
} \, {[\textsc{\scriptsize K{-}func}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{ \vdash }\;{\mathit{gt}} : \mathsf{ok}
} \, {[\textsc{\scriptsize K{-}global}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{lim}} : {2^{32}} - 1
}{
{ \vdash }\;{\mathit{lim}} : \mathsf{ok}
} \, {[\textsc{\scriptsize K{-}table}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{lim}} : {2^{16}}
}{
{ \vdash }\;{\mathit{lim}} : \mathsf{ok}
} \, {[\textsc{\scriptsize K{-}mem}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{functype}} : \mathsf{ok}
}{
{ \vdash }\;\mathsf{func}~\,{\mathit{functype}} : \mathsf{ok}
} \, {[\textsc{\scriptsize K{-}extern{-}func}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{globaltype}} : \mathsf{ok}
}{
{ \vdash }\;\mathsf{global}~\,{\mathit{globaltype}} : \mathsf{ok}
} \, {[\textsc{\scriptsize K{-}extern{-}global}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{tabletype}} : \mathsf{ok}
}{
{ \vdash }\;\mathsf{table}~\,{\mathit{tabletype}} : \mathsf{ok}
} \, {[\textsc{\scriptsize K{-}extern{-}table}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{memtype}} : \mathsf{ok}
}{
{ \vdash }\;\mathsf{mem}~\,{\mathit{memtype}} : \mathsf{ok}
} \, {[\textsc{\scriptsize K{-}extern{-}mem}]}
\qquad
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$\boxed{{ \vdash }\;{\mathit{limits}} \leq {\mathit{limits}}}$

$\boxed{{ \vdash }\;{\mathit{functype}} \leq {\mathit{functype}}}$

$\boxed{{ \vdash }\;{\mathit{globaltype}} \leq {\mathit{globaltype}}}$

$\boxed{{ \vdash }\;{\mathit{tabletype}} \leq {\mathit{tabletype}}}$

$\boxed{{ \vdash }\;{\mathit{memtype}} \leq {\mathit{memtype}}}$

$\boxed{{ \vdash }\;{\mathit{externtype}} \leq {\mathit{externtype}}}$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{n}}_{{11}} \geq {\mathit{n}}_{{21}}
 \qquad
{\mathit{n}}_{{12}} \leq {\mathit{n}}_{{22}}
}{
{ \vdash }\;{}[{\mathit{n}}_{{11}} .. {\mathit{n}}_{{12}}] \leq {}[{\mathit{n}}_{{21}} .. {\mathit{n}}_{{22}}]
} \, {[\textsc{\scriptsize S{-}limits}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{ \vdash }\;{\mathit{ft}} \leq {\mathit{ft}}
} \, {[\textsc{\scriptsize S{-}func}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{ \vdash }\;{\mathit{gt}} \leq {\mathit{gt}}
} \, {[\textsc{\scriptsize S{-}global}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{lim}}_{{1}} \leq {\mathit{lim}}_{{2}}
}{
{ \vdash }\;{\mathit{lim}}_{{1}} \leq {\mathit{lim}}_{{2}}
} \, {[\textsc{\scriptsize S{-}table}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{lim}}_{{1}} \leq {\mathit{lim}}_{{2}}
}{
{ \vdash }\;{\mathit{lim}}_{{1}} \leq {\mathit{lim}}_{{2}}
} \, {[\textsc{\scriptsize S{-}mem}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{ft}}_{{1}} \leq {\mathit{ft}}_{{2}}
}{
{ \vdash }\;\mathsf{func}~\,{\mathit{ft}}_{{1}} \leq \mathsf{func}~\,{\mathit{ft}}_{{2}}
} \, {[\textsc{\scriptsize S{-}extern{-}func}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{gt}}_{{1}} \leq {\mathit{gt}}_{{2}}
}{
{ \vdash }\;\mathsf{global}~\,{\mathit{gt}}_{{1}} \leq \mathsf{global}~\,{\mathit{gt}}_{{2}}
} \, {[\textsc{\scriptsize S{-}extern{-}global}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{tt}}_{{1}} \leq {\mathit{tt}}_{{2}}
}{
{ \vdash }\;\mathsf{table}~\,{\mathit{tt}}_{{1}} \leq \mathsf{table}~\,{\mathit{tt}}_{{2}}
} \, {[\textsc{\scriptsize S{-}extern{-}table}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{mt}}_{{1}} \leq {\mathit{mt}}_{{2}}
}{
{ \vdash }\;\mathsf{mem}~\,{\mathit{mt}}_{{1}} \leq \mathsf{mem}~\,{\mathit{mt}}_{{2}}
} \, {[\textsc{\scriptsize S{-}extern{-}mem}]}
\qquad
\end{array}
$$

\vspace{1ex}

$\boxed{{\mathit{context}} \vdash {\mathit{instr}} : {\mathit{functype}}}$

$\boxed{{\mathit{context}} \vdash {{\mathit{instr}}^\ast} : {\mathit{functype}}}$

$\boxed{{\mathit{context}} \vdash {\mathit{expr}} : {\mathit{resulttype}}}$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}} \vdash {{\mathit{instr}}^\ast} : \epsilon \rightarrow {{\mathit{t}}^?}
}{
{\mathit{C}} \vdash {{\mathit{instr}}^\ast} : {{\mathit{t}}^?}
} \, {[\textsc{\scriptsize T{-}expr}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash \epsilon : \epsilon \rightarrow \epsilon
} \, {[\textsc{\scriptsize T*{-}empty}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}} \vdash {\mathit{instr}}_{{1}} : {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^\ast}
 \qquad
{\mathit{C}} \vdash {\mathit{instr}}_{{2}} : {{\mathit{t}}_{{2}}^\ast} \rightarrow {{\mathit{t}}_{{3}}^\ast}
}{
{\mathit{C}} \vdash {\mathit{instr}}_{{1}}~\,{{\mathit{instr}}_{{2}}^\ast} : {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{3}}^\ast}
} \, {[\textsc{\scriptsize T*{-}seq}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}} \vdash {{\mathit{instr}}^\ast} : {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^\ast}
}{
{\mathit{C}} \vdash {{\mathit{instr}}^\ast} : {{\mathit{t}}^\ast}~\,{{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}^\ast}~\,{{\mathit{t}}_{{2}}^\ast}
} \, {[\textsc{\scriptsize T*{-}frame}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash \mathsf{unreachable} : {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^\ast}
} \, {[\textsc{\scriptsize T{-}unreachable}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash \mathsf{nop} : \epsilon \rightarrow \epsilon
} \, {[\textsc{\scriptsize T{-}nop}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash \mathsf{drop} : {\mathit{t}} \rightarrow \epsilon
} \, {[\textsc{\scriptsize T{-}drop}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash \mathsf{select} : {\mathit{t}}~\,{\mathit{t}}~\,\mathsf{i{\scriptstyle32}} \rightarrow {\mathit{t}}
} \, {[\textsc{\scriptsize T{-}select}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}, \mathsf{label}~\,({{\mathit{t}}^?}) \vdash {{\mathit{instr}}^\ast} : \epsilon \rightarrow {{\mathit{t}}^?}
}{
{\mathit{C}} \vdash \mathsf{block}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}^\ast} : \epsilon \rightarrow {{\mathit{t}}^?}
} \, {[\textsc{\scriptsize T{-}block}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}, \mathsf{label}~\,(\epsilon) \vdash {{\mathit{instr}}^\ast} : \epsilon \rightarrow \epsilon
}{
{\mathit{C}} \vdash \mathsf{loop}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}^\ast} : \epsilon \rightarrow {{\mathit{t}}^?}
} \, {[\textsc{\scriptsize T{-}loop}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}, \mathsf{label}~\,({{\mathit{t}}^?}) \vdash {{\mathit{instr}}_{{1}}^\ast} : \epsilon \rightarrow {{\mathit{t}}^?}
 \qquad
{\mathit{C}}, \mathsf{label}~\,({{\mathit{t}}^?}) \vdash {{\mathit{instr}}_{{2}}^\ast} : \epsilon \rightarrow {{\mathit{t}}^?}
}{
{\mathit{C}} \vdash \mathsf{if}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}_{{1}}^\ast}~\,\mathsf{else}~\,{{\mathit{instr}}_{{2}}^\ast} : \mathsf{i{\scriptstyle32}} \rightarrow {{\mathit{t}}^?}
} \, {[\textsc{\scriptsize T{-}if}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{label}{}[{\mathit{l}}] = {{\mathit{t}}^?}
}{
{\mathit{C}} \vdash \mathsf{br}~\,{\mathit{l}} : {{\mathit{t}}_{{1}}^\ast}~\,{{\mathit{t}}^?} \rightarrow {{\mathit{t}}_{{2}}^\ast}
} \, {[\textsc{\scriptsize T{-}br}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{label}{}[{\mathit{l}}] = {{\mathit{t}}^?}
}{
{\mathit{C}} \vdash \mathsf{br\_if}~\,{\mathit{l}} : {{\mathit{t}}^?}~\,\mathsf{i{\scriptstyle32}} \rightarrow {{\mathit{t}}^?}
} \, {[\textsc{\scriptsize T{-}br\_if}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{{\mathit{t}}^?} = {\mathit{C}}.\mathsf{label}{}[{\mathit{l}'}]
 \qquad
(({{\mathit{t}}^?} = {\mathit{C}}.\mathsf{label}{}[{\mathit{l}}]))^\ast
}{
{\mathit{C}} \vdash \mathsf{br\_table}~\,{{\mathit{l}}^\ast}~\,{\mathit{l}'} : {{\mathit{t}}_{{1}}^\ast}~\,{{\mathit{t}}^?} \rightarrow {{\mathit{t}}_{{2}}^\ast}
} \, {[\textsc{\scriptsize T{-}br\_table}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{return} = ({{\mathit{t}}^?})
}{
{\mathit{C}} \vdash \mathsf{return} : {{\mathit{t}}_{{1}}^\ast}~\,{{\mathit{t}}^?} \rightarrow {{\mathit{t}}_{{2}}^\ast}
} \, {[\textsc{\scriptsize T{-}return}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{func}{}[{\mathit{x}}] = {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^?}
}{
{\mathit{C}} \vdash \mathsf{call}~\,{\mathit{x}} : {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^?}
} \, {[\textsc{\scriptsize T{-}call}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{type}{}[{\mathit{x}}] = {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^?}
}{
{\mathit{C}} \vdash \mathsf{call\_indirect}~\,{\mathit{x}} : {{\mathit{t}}_{{1}}^\ast}~\,\mathsf{i{\scriptstyle32}} \rightarrow {{\mathit{t}}_{{2}}^?}
} \, {[\textsc{\scriptsize T{-}call\_indirect}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash {\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{\mathit{t}}} : \epsilon \rightarrow {\mathit{t}}
} \, {[\textsc{\scriptsize T{-}const}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash {\mathit{t}} . {\mathit{unop}}_{{\mathit{t}}} : {\mathit{t}} \rightarrow {\mathit{t}}
} \, {[\textsc{\scriptsize T{-}unop}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash {\mathit{t}} . {\mathit{binop}}_{{\mathit{t}}} : {\mathit{t}}~\,{\mathit{t}} \rightarrow {\mathit{t}}
} \, {[\textsc{\scriptsize T{-}binop}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash {\mathit{t}} . {\mathit{testop}}_{{\mathit{t}}} : {\mathit{t}} \rightarrow \mathsf{i{\scriptstyle32}}
} \, {[\textsc{\scriptsize T{-}testop}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash {\mathit{t}} . {\mathit{relop}}_{{\mathit{t}}} : {\mathit{t}}~\,{\mathit{t}} \rightarrow \mathsf{i{\scriptstyle32}}
} \, {[\textsc{\scriptsize T{-}relop}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{t}}_{{1}} \neq {\mathit{t}}_{{2}}
 \qquad
{|{\mathit{t}}_{{1}}|} = {|{\mathit{t}}_{{2}}|}
}{
{\mathit{C}} \vdash \mathsf{cvtop}~\,{\mathit{t}}_{{1}}~\,\mathsf{reinterpret}~\,{\mathit{t}}_{{2}} : {\mathit{t}}_{{2}} \rightarrow {\mathit{t}}_{{1}}
} \, {[\textsc{\scriptsize T{-}reinterpret}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{{\mathsf{i}}{{\mathit{n}}}}_{{1}} \neq {{\mathsf{i}}{{\mathit{n}}}}_{{2}}
 \qquad
{{\mathit{sx}}^?} = \epsilon \Leftrightarrow {|{{\mathsf{i}}{{\mathit{n}}}}_{{1}}|} > {|{{\mathsf{i}}{{\mathit{n}}}}_{{2}}|}
}{
{\mathit{C}} \vdash {{\mathsf{i}}{{\mathit{n}}}}_{{1}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{{{\mathsf{i}}{{\mathit{n}}}}_{{2}}}}{\mathsf{\_}}}{{{\mathit{sx}}^?}} : {{\mathsf{i}}{{\mathit{n}}}}_{{2}} \rightarrow {{\mathsf{i}}{{\mathit{n}}}}_{{1}}
} \, {[\textsc{\scriptsize T{-}convert{-}i}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{{\mathsf{f}}{{\mathit{n}}}}_{{1}} \neq {{\mathsf{f}}{{\mathit{n}}}}_{{2}}
}{
{\mathit{C}} \vdash \mathsf{cvtop}~\,{{\mathsf{f}}{{\mathit{n}}}}_{{1}}~\,\mathsf{convert}~\,{{\mathsf{f}}{{\mathit{n}}}}_{{2}} : {{\mathsf{f}}{{\mathit{n}}}}_{{2}} \rightarrow {{\mathsf{f}}{{\mathit{n}}}}_{{1}}
} \, {[\textsc{\scriptsize T{-}convert{-}f}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{local}{}[{\mathit{x}}] = {\mathit{t}}
}{
{\mathit{C}} \vdash \mathsf{local.get}~\,{\mathit{x}} : \epsilon \rightarrow {\mathit{t}}
} \, {[\textsc{\scriptsize T{-}local.get}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{local}{}[{\mathit{x}}] = {\mathit{t}}
}{
{\mathit{C}} \vdash \mathsf{local.set}~\,{\mathit{x}} : {\mathit{t}} \rightarrow \epsilon
} \, {[\textsc{\scriptsize T{-}local.set}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{local}{}[{\mathit{x}}] = {\mathit{t}}
}{
{\mathit{C}} \vdash \mathsf{local.tee}~\,{\mathit{x}} : {\mathit{t}} \rightarrow {\mathit{t}}
} \, {[\textsc{\scriptsize T{-}local.tee}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{global}{}[{\mathit{x}}] = {\mathit{mut}}~\,{\mathit{t}}
}{
{\mathit{C}} \vdash \mathsf{global.get}~\,{\mathit{x}} : \epsilon \rightarrow {\mathit{t}}
} \, {[\textsc{\scriptsize T{-}global.get}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{global}{}[{\mathit{x}}] = \mathsf{mut}~\,{\mathit{t}}
}{
{\mathit{C}} \vdash \mathsf{global.set}~\,{\mathit{x}} : {\mathit{t}} \rightarrow \epsilon
} \, {[\textsc{\scriptsize T{-}global.set}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{mem}{}[0] = {\mathit{mt}}
}{
{\mathit{C}} \vdash \mathsf{memory.size} : \epsilon \rightarrow \mathsf{i{\scriptstyle32}}
} \, {[\textsc{\scriptsize T{-}memory.size}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{mem}{}[0] = {\mathit{mt}}
}{
{\mathit{C}} \vdash \mathsf{memory.grow} : \mathsf{i{\scriptstyle32}} \rightarrow \mathsf{i{\scriptstyle32}}
} \, {[\textsc{\scriptsize T{-}memory.grow}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{mem}{}[0] = {\mathit{mt}}
 \qquad
{2^{{\mathit{n}}_{{\mathsf{a}}}}} \leq {|{\mathit{t}}|} / 8
 \qquad
({2^{{\mathit{n}}_{{\mathsf{a}}}}} \leq {\mathit{n}} / 8 < {|{\mathit{t}}|} / 8)^?
 \qquad
{{\mathit{n}}^?} = \epsilon \lor {\mathit{t}} = {\mathsf{i}}{{\mathit{n}}}
}{
{\mathit{C}} \vdash {{\mathit{t}}.\mathsf{load}}{{({\mathit{n}}~\,\mathsf{\_}~\,{\mathit{sx}})^?}}~\,\{ \begin{array}[t]{@{}l@{}}
\mathsf{align}~\,{\mathit{n}}_{{\mathsf{a}}},\; \mathsf{offset}~\,{\mathit{n}}_{{\mathsf{o}}} \}\end{array} : \mathsf{i{\scriptstyle32}} \rightarrow {\mathit{t}}
} \, {[\textsc{\scriptsize T{-}load}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{mem}{}[0] = {\mathit{mt}}
 \qquad
{2^{{\mathit{n}}_{{\mathsf{a}}}}} \leq {|{\mathit{t}}|} / 8
 \qquad
({2^{{\mathit{n}}_{{\mathsf{a}}}}} \leq {\mathit{n}} / 8 < {|{\mathit{t}}|} / 8)^?
 \qquad
{{\mathit{n}}^?} = \epsilon \lor {\mathit{t}} = {\mathsf{i}}{{\mathit{n}}}
}{
{\mathit{C}} \vdash {{\mathit{t}}.\mathsf{store}}{{{\mathit{n}}^?}}~\,\{ \begin{array}[t]{@{}l@{}}
\mathsf{align}~\,{\mathit{n}}_{{\mathsf{a}}},\; \mathsf{offset}~\,{\mathit{n}}_{{\mathsf{o}}} \}\end{array} : \mathsf{i{\scriptstyle32}}~\,{\mathit{t}} \rightarrow \epsilon
} \, {[\textsc{\scriptsize T{-}store}]}
\qquad
\end{array}
$$

\vspace{1ex}

$\boxed{{\mathit{context}} \vdash {\mathit{instr}}~\,\mathsf{const}}$

$\boxed{{\mathit{context}} \vdash {\mathit{expr}}~\,\mathsf{const}}$

$\boxed{{\mathit{context}} \vdash {\mathit{expr}} : {{\mathit{valtype}}^?}~\,\mathsf{const}}$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
}{
{\mathit{C}} \vdash ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}})~\,\mathsf{const}
} \, {[\textsc{\scriptsize C{-}instr{-}const}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{global}{}[{\mathit{x}}] = {\mathit{t}}
}{
{\mathit{C}} \vdash (\mathsf{global.get}~\,{\mathit{x}})~\,\mathsf{const}
} \, {[\textsc{\scriptsize C{-}instr{-}global.get}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
({\mathit{C}} \vdash {\mathit{instr}}~\,\mathsf{const})^\ast
}{
{\mathit{C}} \vdash {{\mathit{instr}}^\ast}~\,\mathsf{const}
} \, {[\textsc{\scriptsize C{-}expr}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}} \vdash {\mathit{expr}} : {{\mathit{t}}^?}
 \qquad
{\mathit{C}} \vdash {\mathit{expr}}~\,\mathsf{const}
}{
{\mathit{C}} \vdash {\mathit{expr}} : {{\mathit{t}}^?}~\,\mathsf{const}
} \, {[\textsc{\scriptsize TC{-}expr}]}
\qquad
\end{array}
$$

\vspace{1ex}

$\boxed{{ \vdash }\;{\mathit{type}} : {\mathit{functype}}}$

$\boxed{{\mathit{context}} \vdash {\mathit{func}} : {\mathit{functype}}}$

$\boxed{{\mathit{context}} \vdash {\mathit{global}} : {\mathit{globaltype}}}$

$\boxed{{\mathit{context}} \vdash {\mathit{table}} : {\mathit{tabletype}}}$

$\boxed{{\mathit{context}} \vdash {\mathit{mem}} : {\mathit{memtype}}}$

$\boxed{{\mathit{context}} \vdash {\mathit{elem}} : \mathsf{ok}}$

$\boxed{{\mathit{context}} \vdash {\mathit{data}} : \mathsf{ok}}$

$\boxed{{\mathit{context}} \vdash {\mathit{start}} : \mathsf{ok}}$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{ft}} : \mathsf{ok}
}{
{ \vdash }\;\mathsf{type}~\,{\mathit{ft}} : {\mathit{ft}}
} \, {[\textsc{\scriptsize T{-}type}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{type}{}[{\mathit{x}}] = {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^?}
 \qquad
{\mathit{C}}, \mathsf{local}~\,{{\mathit{t}}_{{1}}^\ast}~\,{{\mathit{t}}^\ast}, \mathsf{label}~\,({{\mathit{t}}_{{2}}^?}), \mathsf{return}~\,({{\mathit{t}}_{{2}}^?}) \vdash {\mathit{expr}} : {{\mathit{t}}_{{2}}^?}
}{
{\mathit{C}} \vdash \mathsf{func}~\,{\mathit{x}}~\,{(\mathsf{local}~\,{\mathit{t}})^\ast}~\,{\mathit{expr}} : {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^?}
} \, {[\textsc{\scriptsize T{-}func}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{gt}} : \mathsf{ok}
 \qquad
{\mathit{gt}} = {\mathit{mut}}~\,{\mathit{t}}
 \qquad
{\mathit{C}} \vdash {\mathit{expr}} : {\mathit{t}}~\,\mathsf{const}
}{
{\mathit{C}} \vdash \mathsf{global}~\,{\mathit{gt}}~\,{\mathit{expr}} : {\mathit{gt}}
} \, {[\textsc{\scriptsize T{-}global}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{tt}} : \mathsf{ok}
}{
{\mathit{C}} \vdash \mathsf{table}~\,{\mathit{tt}} : {\mathit{tt}}
} \, {[\textsc{\scriptsize T{-}table}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{mt}} : \mathsf{ok}
}{
{\mathit{C}} \vdash \mathsf{memory}~\,{\mathit{mt}} : {\mathit{mt}}
} \, {[\textsc{\scriptsize T{-}mem}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{table}{}[0] = {\mathit{lim}}
 \qquad
{\mathit{C}} \vdash {\mathit{expr}} : \mathsf{i{\scriptstyle32}}~\,\mathsf{const}
 \qquad
(({\mathit{C}}.\mathsf{func}{}[{\mathit{x}}] = {\mathit{ft}}))^\ast
}{
{\mathit{C}} \vdash \mathsf{elem}~\,{\mathit{expr}}~\,{{\mathit{x}}^\ast} : \mathsf{ok}
} \, {[\textsc{\scriptsize T{-}elem}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{mem}{}[0] = {\mathit{lim}}
 \qquad
{\mathit{C}} \vdash {\mathit{expr}} : \mathsf{i{\scriptstyle32}}~\,\mathsf{const}
}{
{\mathit{C}} \vdash \mathsf{data}~\,{\mathit{expr}}~\,{{\mathit{b}}^\ast} : \mathsf{ok}
} \, {[\textsc{\scriptsize T{-}data}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{func}{}[{\mathit{x}}] = \epsilon \rightarrow \epsilon
}{
{\mathit{C}} \vdash \mathsf{start}~\,{\mathit{x}} : \mathsf{ok}
} \, {[\textsc{\scriptsize T{-}start}]}
\qquad
\end{array}
$$

\vspace{1ex}

$\boxed{{\mathit{context}} \vdash {\mathit{import}} : {\mathit{externtype}}}$

$\boxed{{\mathit{context}} \vdash {\mathit{export}} : {\mathit{externtype}}}$

$\boxed{{\mathit{context}} \vdash {\mathit{externidx}} : {\mathit{externtype}}}$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{ \vdash }\;{\mathit{xt}} : \mathsf{ok}
}{
{\mathit{C}} \vdash \mathsf{import}~\,{\mathit{name}}_{{1}}~\,{\mathit{name}}_{{2}}~\,{\mathit{xt}} : {\mathit{xt}}
} \, {[\textsc{\scriptsize T{-}import}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}} \vdash {\mathit{externidx}} : {\mathit{xt}}
}{
{\mathit{C}} \vdash \mathsf{export}~\,{\mathit{name}}~\,{\mathit{externidx}} : {\mathit{xt}}
} \, {[\textsc{\scriptsize T{-}export}]}
\qquad
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{func}{}[{\mathit{x}}] = {\mathit{ft}}
}{
{\mathit{C}} \vdash \mathsf{func}~\,{\mathit{x}} : \mathsf{func}~\,{\mathit{ft}}
} \, {[\textsc{\scriptsize T{-}externidx{-}func}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{global}{}[{\mathit{x}}] = {\mathit{gt}}
}{
{\mathit{C}} \vdash \mathsf{global}~\,{\mathit{x}} : \mathsf{global}~\,{\mathit{gt}}
} \, {[\textsc{\scriptsize T{-}externidx{-}global}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{table}{}[{\mathit{x}}] = {\mathit{tt}}
}{
{\mathit{C}} \vdash \mathsf{table}~\,{\mathit{x}} : \mathsf{table}~\,{\mathit{tt}}
} \, {[\textsc{\scriptsize T{-}externidx{-}table}]}
\qquad
\end{array}
$$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
{\mathit{C}}.\mathsf{mem}{}[{\mathit{x}}] = {\mathit{mt}}
}{
{\mathit{C}} \vdash \mathsf{mem}~\,{\mathit{x}} : \mathsf{mem}~\,{\mathit{mt}}
} \, {[\textsc{\scriptsize T{-}externidx{-}mem}]}
\qquad
\end{array}
$$

\vspace{1ex}

$\boxed{{ \vdash }\;{\mathit{module}} : \mathsf{ok}}$

$$
\begin{array}{@{}c@{}}\displaystyle
\frac{
\begin{array}{@{}c@{}}
{\mathit{C}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{{\mathit{ft}'}^\ast},\; \mathsf{func}~\,{{\mathit{ft}}^\ast},\; \mathsf{global}~\,{{\mathit{gt}}^\ast},\; \mathsf{table}~\,{{\mathit{tt}}^\ast},\; \mathsf{mem}~\,{{\mathit{mt}}^\ast} \}\end{array}
 \\
({ \vdash }\;{\mathit{type}} : {\mathit{ft}'})^\ast
 \qquad
({\mathit{C}} \vdash {\mathit{func}} : {\mathit{ft}})^\ast
 \qquad
({\mathit{C}} \vdash {\mathit{global}} : {\mathit{gt}})^\ast
 \qquad
({\mathit{C}} \vdash {\mathit{table}} : {\mathit{tt}})^\ast
 \qquad
({\mathit{C}} \vdash {\mathit{mem}} : {\mathit{mt}})^\ast
 \\
({\mathit{C}} \vdash {\mathit{elem}} : \mathsf{ok})^\ast
 \qquad
({\mathit{C}} \vdash {\mathit{data}} : \mathsf{ok})^\ast
 \qquad
({\mathit{C}} \vdash {\mathit{start}} : \mathsf{ok})^?
 \\
{|{{\mathit{tt}}^\ast}|} \leq 1
 \qquad
{|{{\mathit{mt}}^\ast}|} \leq 1
\end{array}
}{
{ \vdash }\;\mathsf{module}~\,{{\mathit{type}}^\ast}~\,{{\mathit{import}}^\ast}~\,{{\mathit{func}}^\ast}~\,{{\mathit{global}}^\ast}~\,{{\mathit{table}}^\ast}~\,{{\mathit{mem}}^\ast}~\,{{\mathit{elem}}^\ast}~\,{{\mathit{data}}^\ast}~\,{{\mathit{start}}^?}~\,{{\mathit{export}}^\ast} : \mathsf{ok}
} \, {[\textsc{\scriptsize T{-}module}]}
\qquad
\end{array}
$$

$\boxed{{\mathit{config}} \hookrightarrow {\mathit{config}}}$

$\boxed{{{\mathit{instr}}^\ast} \hookrightarrow {{\mathit{instr}}^\ast}}$

$\boxed{{\mathit{config}} \hookrightarrow {{\mathit{instr}}^\ast}}$

$\boxed{{\mathit{config}} \hookrightarrow^\ast {\mathit{config}}}$

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}pure}]} \quad & {\mathit{z}} ; {{\mathit{instr}}^\ast} &\hookrightarrow& {\mathit{z}} ; {{\mathit{instr}'}^\ast} &\quad
  \mbox{if}~{{\mathit{instr}}^\ast} \hookrightarrow {{\mathit{instr}'}^\ast} \\
{[\textsc{\scriptsize E{-}read}]} \quad & {\mathit{z}} ; {{\mathit{instr}}^\ast} &\hookrightarrow& {\mathit{z}} ; {{\mathit{instr}'}^\ast} &\quad
  \mbox{if}~{\mathit{z}} ; {{\mathit{instr}}^\ast} \hookrightarrow {{\mathit{instr}'}^\ast} \\
\end{array}
$$

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}refl}]} \quad & {\mathit{z}} ; {{\mathit{instr}}^\ast} &\hookrightarrow^\ast& {\mathit{z}} ; {{\mathit{instr}}^\ast} &  \\
{[\textsc{\scriptsize E{-}trans}]} \quad & {\mathit{z}} ; {{\mathit{instr}}^\ast} &\hookrightarrow^\ast& {\mathit{z}''} ; {{{\mathit{instr}}''}^\ast} &\quad
  \mbox{if}~{\mathit{z}} ; {{\mathit{instr}}^\ast} \hookrightarrow {\mathit{z}'} ; {{{\mathit{instr}}'}^\ast} \\
 &&&&\quad {\land}~{\mathit{z}'} ; {{\mathit{instr}}'} \hookrightarrow^\ast {\mathit{z}''} ; {{{\mathit{instr}}''}^\ast} \\
\end{array}
$$

\vspace{1ex}

$\boxed{{\mathit{state}} ; {\mathit{expr}} \hookrightarrow^\ast {\mathit{state}} ; {{\mathit{val}}^\ast}}$

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}expr}]} \quad & {\mathit{z}} ; {{\mathit{instr}}^\ast} &\hookrightarrow^\ast& {\mathit{z}'} ; {{\mathit{val}}^\ast} &\quad
  \mbox{if}~{\mathit{z}} ; {{\mathit{instr}}^\ast} \hookrightarrow^\ast {\mathit{z}'} ; {{\mathit{val}}^\ast} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}unreachable}]} \quad & \mathsf{unreachable} &\hookrightarrow& \mathsf{trap} &  \\
{[\textsc{\scriptsize E{-}nop}]} \quad & \mathsf{nop} &\hookrightarrow& \epsilon &  \\
{[\textsc{\scriptsize E{-}drop}]} \quad & {\mathit{val}}~\,\mathsf{drop} &\hookrightarrow& \epsilon &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}select{-}true}]} \quad & {\mathit{val}}_{{1}}~\,{\mathit{val}}_{{2}}~\,(\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{c}})~\,(\mathsf{select}~\,{{{\mathit{t}}^\ast}^?}) &\hookrightarrow& {\mathit{val}}_{{1}} &\quad
  \mbox{if}~{\mathit{c}} \neq 0 \\
{[\textsc{\scriptsize E{-}select{-}false}]} \quad & {\mathit{val}}_{{1}}~\,{\mathit{val}}_{{2}}~\,(\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{c}})~\,(\mathsf{select}~\,{{{\mathit{t}}^\ast}^?}) &\hookrightarrow& {\mathit{val}}_{{2}} &\quad
  \mbox{if}~{\mathit{c}} = 0 \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}block}]} \quad & {\mathit{z}} ; (\mathsf{block}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}^\ast}) &\hookrightarrow& ({{\mathsf{label}}_{{\mathit{n}}}}{\{\epsilon\}}~\,{{\mathit{instr}}^\ast}) &\quad
  \mbox{if}~{{\mathit{t}}^?} = \epsilon \land {\mathit{n}} = 0 \lor {{\mathit{t}}^?} \neq \epsilon \land {\mathit{n}} = 1 \\
{[\textsc{\scriptsize E{-}loop}]} \quad & {\mathit{z}} ; (\mathsf{loop}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}^\ast}) &\hookrightarrow& ({{\mathsf{label}}_{0}}{\{\mathsf{loop}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}^\ast}\}}~\,{{\mathit{instr}}^\ast}) &  \\
\end{array}
$$

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}if{-}true}]} \quad & (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{c}})~\,(\mathsf{if}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}_{{1}}^\ast}~\,\mathsf{else}~\,{{\mathit{instr}}_{{2}}^\ast}) &\hookrightarrow& (\mathsf{block}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}_{{1}}^\ast}) &\quad
  \mbox{if}~{\mathit{c}} \neq 0 \\
{[\textsc{\scriptsize E{-}if{-}false}]} \quad & (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{c}})~\,(\mathsf{if}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}_{{1}}^\ast}~\,\mathsf{else}~\,{{\mathit{instr}}_{{2}}^\ast}) &\hookrightarrow& (\mathsf{block}~\,{{\mathit{t}}^?}~\,{{\mathit{instr}}_{{2}}^\ast}) &\quad
  \mbox{if}~{\mathit{c}} = 0 \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}label{-}vals}]} \quad & ({{\mathsf{label}}_{{\mathit{n}}}}{\{{{\mathit{instr}}^\ast}\}}~\,{{\mathit{val}}^\ast}) &\hookrightarrow& {{\mathit{val}}^\ast} &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}br{-}zero}]} \quad & ({{\mathsf{label}}_{{\mathit{n}}}}{\{{{\mathit{instr}'}^\ast}\}}~\,({{\mathit{val}'}^\ast}, {{\mathit{val}}^{{\mathit{n}}}}, (\mathsf{br}~\,0), {{\mathit{instr}}^\ast})) &\hookrightarrow& {{\mathit{val}}^{{\mathit{n}}}}~\,{{\mathit{instr}'}^\ast} &  \\
{[\textsc{\scriptsize E{-}br{-}succ}]} \quad & ({{\mathsf{label}}_{{\mathit{n}}}}{\{{{\mathit{instr}'}^\ast}\}}~\,({{\mathit{val}}^\ast}, (\mathsf{br}~\,{\mathit{l}} + 1), {{\mathit{instr}}^\ast})) &\hookrightarrow& {{\mathit{val}}^\ast}~\,(\mathsf{br}~\,{\mathit{l}}) &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}br\_if{-}true}]} \quad & (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{c}})~\,(\mathsf{br\_if}~\,{\mathit{l}}) &\hookrightarrow& (\mathsf{br}~\,{\mathit{l}}) &\quad
  \mbox{if}~{\mathit{c}} \neq 0 \\
{[\textsc{\scriptsize E{-}br\_if{-}false}]} \quad & (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{c}})~\,(\mathsf{br\_if}~\,{\mathit{l}}) &\hookrightarrow& \epsilon &\quad
  \mbox{if}~{\mathit{c}} = 0 \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}br\_table{-}lt}]} \quad & (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,(\mathsf{br\_table}~\,{{\mathit{l}}^\ast}~\,{\mathit{l}'}) &\hookrightarrow& (\mathsf{br}~\,{{\mathit{l}}^\ast}{}[{\mathit{i}}]) &\quad
  \mbox{if}~{\mathit{i}} < {|{{\mathit{l}}^\ast}|} \\
{[\textsc{\scriptsize E{-}br\_table{-}ge}]} \quad & (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,(\mathsf{br\_table}~\,{{\mathit{l}}^\ast}~\,{\mathit{l}'}) &\hookrightarrow& (\mathsf{br}~\,{\mathit{l}'}) &\quad
  \mbox{if}~{\mathit{i}} \geq {|{{\mathit{l}}^\ast}|} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}call}]} \quad & {\mathit{z}} ; (\mathsf{call}~\,{\mathit{x}}) &\hookrightarrow& (\mathsf{call}~\,{\mathit{z}}.\mathsf{module}.\mathsf{func}{}[{\mathit{x}}]) &  \\
{[\textsc{\scriptsize E{-}call\_indirect{-}call}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,(\mathsf{call\_indirect}~\,{\mathit{x}}) &\hookrightarrow& (\mathsf{call}~\,{\mathit{a}}) &\quad
  \mbox{if}~{{\mathit{z}}.\mathsf{table}}{{}[0]}.\mathsf{elem}{}[{\mathit{i}}] = {\mathit{a}} \\
 &&&&\quad {\land}~{\mathit{z}}.\mathsf{type}~\,{}[{\mathit{x}}] = {\mathit{z}}.\mathsf{func}{}[{\mathit{a}}].\mathsf{type} \\
{[\textsc{\scriptsize E{-}call\_indirect{-}trap}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,(\mathsf{call\_indirect}~\,{\mathit{x}}) &\hookrightarrow& \mathsf{trap} &\quad
  \mbox{otherwise} \\
{[\textsc{\scriptsize E{-}call\_addr}]} \quad & {\mathit{z}} ; {{\mathit{val}}^{{\mathit{k}}}}~\,(\mathsf{call}~\,{\mathit{a}}) &\hookrightarrow& ({{\mathsf{frame}}_{{\mathit{n}}}}{\{{\mathit{f}}\}}~\,({{\mathsf{label}}_{{\mathit{n}}}}{\{\epsilon\}}~\,{{\mathit{instr}}^\ast})) &\quad
  \mbox{if}~{\mathit{z}}.\mathsf{func}{}[{\mathit{a}}] = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,({{\mathit{t}}_{{1}}^{{\mathit{k}}}} \rightarrow {{\mathit{t}}_{{2}}^{{\mathit{n}}}}),\; \mathsf{module}~\,{\mathit{mm}},\; \mathsf{code}~\,{\mathit{func}} \}\end{array} \\
 &&&&\quad {\land}~{\mathit{func}} = \mathsf{func}~\,{\mathit{x}}~\,{(\mathsf{local}~\,{\mathit{t}})^\ast}~\,{{\mathit{instr}}^\ast} \\
 &&&&\quad {\land}~{\mathit{f}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{local}~\,{{\mathit{val}}^{{\mathit{k}}}}~\,{({\mathrm{default}}~\,{\mathit{t}})^\ast},\; \mathsf{module}~\,{\mathit{mm}} \}\end{array} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}frame{-}vals}]} \quad & ({{\mathsf{frame}}_{{\mathit{n}}}}{\{{\mathit{f}}\}}~\,{{\mathit{val}}^{{\mathit{n}}}}) &\hookrightarrow& {{\mathit{val}}^{{\mathit{n}}}} &  \\
{[\textsc{\scriptsize E{-}return{-}frame}]} \quad & ({{\mathsf{frame}}_{{\mathit{n}}}}{\{{\mathit{f}}\}}~\,({{\mathit{val}'}^\ast}, {{\mathit{val}}^{{\mathit{n}}}}, \mathsf{return}, {{\mathit{instr}}^\ast})) &\hookrightarrow& {{\mathit{val}}^{{\mathit{n}}}} &  \\
{[\textsc{\scriptsize E{-}return{-}label}]} \quad & ({{\mathsf{label}}_{{\mathit{k}}}}{\{{{\mathit{instr}'}^\ast}\}}~\,({{\mathit{val}}^\ast}, \mathsf{return}, {{\mathit{instr}}^\ast})) &\hookrightarrow& {{\mathit{val}}^\ast}~\,\mathsf{return} &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}unop{-}val}]} \quad & ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{1}})~\,({\mathit{t}} . {\mathit{unop}}) &\hookrightarrow& ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}) &\quad
  \mbox{if}~{\mathrm{unop}}({\mathit{t}}, {\mathit{unop}}, {\mathit{c}}_{{1}}) = {\mathit{c}} \\
{[\textsc{\scriptsize E{-}unop{-}trap}]} \quad & ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{1}})~\,({\mathit{t}} . {\mathit{unop}}) &\hookrightarrow& \mathsf{trap} &\quad
  \mbox{if}~{\mathrm{unop}}({\mathit{t}}, {\mathit{unop}}, {\mathit{c}}_{{1}}) = \epsilon \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}binop{-}val}]} \quad & ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{1}})~\,({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{2}})~\,({\mathit{t}} . {\mathit{binop}}) &\hookrightarrow& ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}) &\quad
  \mbox{if}~{\mathrm{binop}}({\mathit{t}}, {\mathit{binop}}, {\mathit{c}}_{{1}}, {\mathit{c}}_{{2}}) = {\mathit{c}} \\
{[\textsc{\scriptsize E{-}binop{-}trap}]} \quad & ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{1}})~\,({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{2}})~\,({\mathit{t}} . {\mathit{binop}}) &\hookrightarrow& \mathsf{trap} &\quad
  \mbox{if}~{\mathrm{binop}}({\mathit{t}}, {\mathit{binop}}, {\mathit{c}}_{{1}}, {\mathit{c}}_{{2}}) = \epsilon \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}testop}]} \quad & ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{1}})~\,({\mathit{t}} . {\mathit{testop}}) &\hookrightarrow& (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{c}}) &\quad
  \mbox{if}~{\mathit{c}} = {\mathrm{testop}}({\mathit{t}}, {\mathit{testop}}, {\mathit{c}}_{{1}}) \\
{[\textsc{\scriptsize E{-}relop}]} \quad & ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{1}})~\,({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}_{{2}})~\,({\mathit{t}} . {\mathit{relop}}) &\hookrightarrow& (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{c}}) &\quad
  \mbox{if}~{\mathit{c}} = {\mathrm{relop}}({\mathit{t}}, {\mathit{relop}}, {\mathit{c}}_{{1}}, {\mathit{c}}_{{2}}) \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}cvtop{-}val}]} \quad & ({\mathit{t}}_{{1}}.\mathsf{const}~\,{\mathit{c}}_{{1}})~\,({\mathit{t}}_{{2}} . {{{{{\mathit{cvtop}}}{\mathsf{\_}}}{{\mathit{t}}_{{1}}}}{\mathsf{\_}}}{{{\mathit{sx}}^?}}) &\hookrightarrow& ({\mathit{t}}_{{2}}.\mathsf{const}~\,{\mathit{c}}) &\quad
  \mbox{if}~{\mathrm{cvtop}}({\mathit{t}}_{{1}}, {\mathit{t}}_{{2}}, {\mathit{cvtop}}, {{\mathit{sx}}^?}, {\mathit{c}}_{{1}}) = {\mathit{c}} \\
{[\textsc{\scriptsize E{-}cvtop{-}trap}]} \quad & ({\mathit{t}}_{{1}}.\mathsf{const}~\,{\mathit{c}}_{{1}})~\,({\mathit{t}}_{{2}} . {{{{{\mathit{cvtop}}}{\mathsf{\_}}}{{\mathit{t}}_{{1}}}}{\mathsf{\_}}}{{{\mathit{sx}}^?}}) &\hookrightarrow& \mathsf{trap} &\quad
  \mbox{if}~{\mathrm{cvtop}}({\mathit{t}}_{{1}}, {\mathit{t}}_{{2}}, {\mathit{cvtop}}, {{\mathit{sx}}^?}, {\mathit{c}}_{{1}}) = \epsilon \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}local.get}]} \quad & {\mathit{z}} ; (\mathsf{local.get}~\,{\mathit{x}}) &\hookrightarrow& {{\mathit{z}}.\mathsf{local}}{{}[{\mathit{x}}]} &  \\
\end{array}
$$

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}local.set}]} \quad & {\mathit{z}} ; {\mathit{val}}~\,(\mathsf{local.set}~\,{\mathit{x}}) &\hookrightarrow& {\mathit{z}}{}[\mathsf{local}{}[{\mathit{x}}] = {\mathit{val}}] ; \epsilon &  \\
\end{array}
$$

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}local.tee}]} \quad & {\mathit{val}}~\,(\mathsf{local.tee}~\,{\mathit{x}}) &\hookrightarrow& {\mathit{val}}~\,{\mathit{val}}~\,(\mathsf{local.set}~\,{\mathit{x}}) &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}global.get}]} \quad & {\mathit{z}} ; (\mathsf{global.get}~\,{\mathit{x}}) &\hookrightarrow& {{\mathit{z}}.\mathsf{global}}{{}[{\mathit{x}}]}.\mathsf{value} &  \\
\end{array}
$$

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}global.set}]} \quad & {\mathit{z}} ; {\mathit{val}}~\,(\mathsf{global.set}~\,{\mathit{x}}) &\hookrightarrow& {\mathit{z}}{}[\mathsf{global}{}[{\mathit{x}}].\mathsf{value} = {\mathit{val}}] ; \epsilon &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}load{-}num{-}trap}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,(\mathsf{load}~\,{\mathit{t}}~\,{\mathit{mo}}) &\hookrightarrow& \mathsf{trap} &\quad
  \mbox{if}~{\mathit{i}} + {\mathit{mo}}.\mathsf{offset} + {|{\mathit{t}}|} / 8 > {|{{\mathit{z}}.\mathsf{mem}}{{}[0]}.\mathsf{data}|} \\
{[\textsc{\scriptsize E{-}load{-}num{-}val}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,(\mathsf{load}~\,{\mathit{t}}~\,{\mathit{mo}}) &\hookrightarrow& ({\mathit{t}}.\mathsf{const}~\,{\mathit{c}}) &\quad
  \mbox{if}~{{\mathrm{bytes}}}_{{\mathit{t}}}({\mathit{c}}) = {{\mathit{z}}.\mathsf{mem}}{{}[0]}.\mathsf{data}{}[{\mathit{i}} + {\mathit{mo}}.\mathsf{offset} : {|{\mathit{t}}|} / 8] \\
{[\textsc{\scriptsize E{-}load{-}pack{-}trap}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,({{\mathsf{i}}{{\mathit{n}}}.\mathsf{load}}{({\mathit{n}}~\,\mathsf{\_}~\,{\mathit{sx}})}~\,{\mathit{mo}}) &\hookrightarrow& \mathsf{trap} &\quad
  \mbox{if}~{\mathit{i}} + {\mathit{mo}}.\mathsf{offset} + {\mathit{n}} / 8 > {|{{\mathit{z}}.\mathsf{mem}}{{}[0]}.\mathsf{data}|} \\
{[\textsc{\scriptsize E{-}load{-}pack{-}val}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,({{\mathsf{i}}{{\mathit{n}}}.\mathsf{load}}{({\mathit{n}}~\,\mathsf{\_}~\,{\mathit{sx}})}~\,{\mathit{mo}}) &\hookrightarrow& ({\mathsf{i}}{{\mathit{n}}}.\mathsf{const}~\,{{{{\mathrm{ext}}}_{({\mathit{n}},\, {|{\mathsf{i}}{{\mathit{n}}}|})}^{{\mathit{sx}}}}}{({\mathit{c}})}) &\quad
  \mbox{if}~{{\mathrm{bytes}}}_{{{\mathit{i}}}{{\mathit{n}}}}({\mathit{c}}) = {{\mathit{z}}.\mathsf{mem}}{{}[0]}.\mathsf{data}{}[{\mathit{i}} + {\mathit{mo}}.\mathsf{offset} : {\mathit{n}} / 8] \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}store{-}num{-}trap}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,({\mathit{t}}.\mathsf{const}~\,{\mathit{c}})~\,(\mathsf{store}~\,{\mathit{t}}~\,{\mathit{mo}}) &\hookrightarrow& {\mathit{z}} ; \mathsf{trap} &\quad
  \mbox{if}~{\mathit{i}} + {\mathit{mo}}.\mathsf{offset} + {|{\mathit{t}}|} / 8 > {|{{\mathit{z}}.\mathsf{mem}}{{}[0]}.\mathsf{data}|} \\
{[\textsc{\scriptsize E{-}store{-}num{-}val}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,({\mathit{t}}.\mathsf{const}~\,{\mathit{c}})~\,(\mathsf{store}~\,{\mathit{t}}~\,{\mathit{mo}}) &\hookrightarrow& {\mathit{z}}{}[\mathsf{mem}{}[0].\mathsf{data}{}[{\mathit{i}} + {\mathit{mo}}.\mathsf{offset} : {|{\mathit{t}}|} / 8] = {{\mathit{b}}^\ast}] ; \epsilon &\quad
  \mbox{if}~{{\mathit{b}}^\ast} = {{\mathrm{bytes}}}_{{\mathit{t}}}({\mathit{c}}) \\
{[\textsc{\scriptsize E{-}store{-}pack{-}trap}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,({\mathsf{i}}{{\mathit{n}}}.\mathsf{const}~\,{\mathit{c}})~\,({{\mathsf{i}}{{\mathit{n}}}.\mathsf{store}}{{\mathit{n}}}~\,{\mathit{mo}}) &\hookrightarrow& {\mathit{z}} ; \mathsf{trap} &\quad
  \mbox{if}~{\mathit{i}} + {\mathit{mo}}.\mathsf{offset} + {\mathit{n}} / 8 > {|{{\mathit{z}}.\mathsf{mem}}{{}[0]}.\mathsf{data}|} \\
{[\textsc{\scriptsize E{-}store{-}pack{-}val}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}})~\,({\mathsf{i}}{{\mathit{n}}}.\mathsf{const}~\,{\mathit{c}})~\,({{\mathsf{i}}{{\mathit{n}}}.\mathsf{store}}{{\mathit{n}}}~\,{\mathit{mo}}) &\hookrightarrow& {\mathit{z}}{}[\mathsf{mem}{}[0].\mathsf{data}{}[{\mathit{i}} + {\mathit{mo}}.\mathsf{offset} : {\mathit{n}} / 8] = {{\mathit{b}}^\ast}] ; \epsilon &\quad
  \mbox{if}~{{\mathit{b}}^\ast} = {{\mathrm{bytes}}}_{{{\mathit{i}}}{{\mathit{n}}}}({{{\mathrm{wrap}}}_{({|{\mathsf{i}}{{\mathit{n}}}|},\, {\mathit{n}})}}{({\mathit{c}})}) \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}memory.size}]} \quad & {\mathit{z}} ; (\mathsf{memory.size}) &\hookrightarrow& (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{n}}) &\quad
  \mbox{if}~{\mathit{n}} \cdot 64 \cdot {\mathrm{Ki}} = {|{{\mathit{z}}.\mathsf{mem}}{{}[0]}.\mathsf{data}|} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}lcl@{}l@{}}
{[\textsc{\scriptsize E{-}memory.grow{-}succeed}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{n}})~\,(\mathsf{memory.grow}) &\hookrightarrow& {\mathit{z}}{}[\mathsf{mem}{}[0] = {\mathit{mi}}] ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{|{{\mathit{z}}.\mathsf{mem}}{{}[0]}.\mathsf{data}|} / (64 \cdot {\mathrm{Ki}})) &\quad
  \mbox{if}~{\mathrm{growmemory}}({{\mathit{z}}.\mathsf{mem}}{{}[0]}, {\mathit{n}}) = {\mathit{mi}} \\
{[\textsc{\scriptsize E{-}memory.grow{-}fail}]} \quad & {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{n}})~\,(\mathsf{memory.grow}) &\hookrightarrow& {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{{{{{\mathrm{signed}}^{{-1}}}}{}}_{32}}{{-1}}) &  \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{funcs}}(\epsilon) &=& \epsilon &  \\
{\mathrm{funcs}}((\mathsf{func}~\,{\mathit{fa}})~\,{{\mathit{externval}'}^\ast}) &=& {\mathit{fa}}~\,{\mathrm{funcs}}({{\mathit{externval}'}^\ast}) &  \\
{\mathrm{funcs}}({\mathit{externval}}~\,{{\mathit{externval}'}^\ast}) &=& {\mathrm{funcs}}({{\mathit{externval}'}^\ast}) &\quad
  \mbox{otherwise} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{globals}}(\epsilon) &=& \epsilon &  \\
{\mathrm{globals}}((\mathsf{global}~\,{\mathit{ga}})~\,{{\mathit{externval}'}^\ast}) &=& {\mathit{ga}}~\,{\mathrm{globals}}({{\mathit{externval}'}^\ast}) &  \\
{\mathrm{globals}}({\mathit{externval}}~\,{{\mathit{externval}'}^\ast}) &=& {\mathrm{globals}}({{\mathit{externval}'}^\ast}) &\quad
  \mbox{otherwise} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{tables}}(\epsilon) &=& \epsilon &  \\
{\mathrm{tables}}((\mathsf{table}~\,{\mathit{ta}})~\,{{\mathit{externval}'}^\ast}) &=& {\mathit{ta}}~\,{\mathrm{tables}}({{\mathit{externval}'}^\ast}) &  \\
{\mathrm{tables}}({\mathit{externval}}~\,{{\mathit{externval}'}^\ast}) &=& {\mathrm{tables}}({{\mathit{externval}'}^\ast}) &\quad
  \mbox{otherwise} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{mems}}(\epsilon) &=& \epsilon &  \\
{\mathrm{mems}}((\mathsf{mem}~\,{\mathit{ma}})~\,{{\mathit{externval}'}^\ast}) &=& {\mathit{ma}}~\,{\mathrm{mems}}({{\mathit{externval}'}^\ast}) &  \\
{\mathrm{mems}}({\mathit{externval}}~\,{{\mathit{externval}'}^\ast}) &=& {\mathrm{mems}}({{\mathit{externval}'}^\ast}) &\quad
  \mbox{otherwise} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{allocfunc}}({\mathit{s}}, {\mathit{mm}}, {\mathit{func}}) &=& ({\mathit{s}}{}[\mathsf{func} = ..{\mathit{fi}}],\, {|{\mathit{s}}.\mathsf{func}|}) &\quad
  \mbox{if}~{\mathit{fi}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{\mathit{mm}}.\mathsf{type}{}[{\mathit{x}}],\; \mathsf{module}~\,{\mathit{mm}},\; \mathsf{code}~\,{\mathit{func}} \}\end{array} \\
 &&&\quad {\land}~{\mathit{func}} = \mathsf{func}~\,{\mathit{x}}~\,{{\mathit{local}}^\ast}~\,{\mathit{expr}} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{allocfuncs}}({\mathit{s}}, {\mathit{mm}}, \epsilon) &=& ({\mathit{s}},\, \epsilon) &  \\
{\mathrm{allocfuncs}}({\mathit{s}}, {\mathit{mm}}, {\mathit{func}}~\,{{\mathit{func}'}^\ast}) &=& ({\mathit{s}}_{{2}},\, {\mathit{fa}}~\,{{\mathit{fa}'}^\ast}) &\quad
  \mbox{if}~({\mathit{s}}_{{1}},\, {\mathit{fa}}) = {\mathrm{allocfunc}}({\mathit{s}}, {\mathit{mm}}, {\mathit{func}}) \\
 &&&\quad {\land}~({\mathit{s}}_{{2}},\, {{\mathit{fa}'}^\ast}) = {\mathrm{allocfuncs}}({\mathit{s}}_{{1}}, {\mathit{mm}}, {{\mathit{func}'}^\ast}) \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{allocglobal}}({\mathit{s}}, {\mathit{globaltype}}, {\mathit{val}}) &=& ({\mathit{s}}{}[\mathsf{global} = ..{\mathit{gi}}],\, {|{\mathit{s}}.\mathsf{global}|}) &\quad
  \mbox{if}~{\mathit{gi}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{\mathit{globaltype}},\; \mathsf{value}~\,{\mathit{val}} \}\end{array} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{allocglobals}}({\mathit{s}}, \epsilon, \epsilon) &=& ({\mathit{s}},\, \epsilon) &  \\
{\mathrm{allocglobals}}({\mathit{s}}, {\mathit{globaltype}}~\,{{\mathit{globaltype}'}^\ast}, {\mathit{val}}~\,{{\mathit{val}'}^\ast}) &=& ({\mathit{s}}_{{2}},\, {\mathit{ga}}~\,{{\mathit{ga}'}^\ast}) &\quad
  \mbox{if}~({\mathit{s}}_{{1}},\, {\mathit{ga}}) = {\mathrm{allocglobal}}({\mathit{s}}, {\mathit{globaltype}}, {\mathit{val}}) \\
 &&&\quad {\land}~({\mathit{s}}_{{2}},\, {{\mathit{ga}'}^\ast}) = {\mathrm{allocglobals}}({\mathit{s}}_{{1}}, {{\mathit{globaltype}'}^\ast}, {{\mathit{val}'}^\ast}) \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{alloctable}}({\mathit{s}}, {}[{\mathit{i}} .. {\mathit{j}}]) &=& ({\mathit{s}}{}[\mathsf{table} = ..{\mathit{ti}}],\, {|{\mathit{s}}.\mathsf{table}|}) &\quad
  \mbox{if}~{\mathit{ti}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{}[{\mathit{i}} .. {\mathit{j}}],\; \mathsf{elem}~\,{\epsilon^{{\mathit{i}}}} \}\end{array} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{alloctables}}({\mathit{s}}, \epsilon) &=& ({\mathit{s}},\, \epsilon) &  \\
{\mathrm{alloctables}}({\mathit{s}}, {\mathit{tabletype}}~\,{{\mathit{tabletype}'}^\ast}) &=& ({\mathit{s}}_{{2}},\, {\mathit{ta}}~\,{{\mathit{ta}'}^\ast}) &\quad
  \mbox{if}~({\mathit{s}}_{{1}},\, {\mathit{ta}}) = {\mathrm{alloctable}}({\mathit{s}}, {\mathit{tabletype}}) \\
 &&&\quad {\land}~({\mathit{s}}_{{2}},\, {{\mathit{ta}'}^\ast}) = {\mathrm{alloctables}}({\mathit{s}}_{{1}}, {{\mathit{tabletype}'}^\ast}) \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{allocmem}}({\mathit{s}}, {}[{\mathit{i}} .. {\mathit{j}}]) &=& ({\mathit{s}}{}[\mathsf{mem} = ..{\mathit{mi}}],\, {|{\mathit{s}}.\mathsf{mem}|}) &\quad
  \mbox{if}~{\mathit{mi}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{}[{\mathit{i}} .. {\mathit{j}}],\; \mathsf{data}~\,{0^{{\mathit{i}} \cdot 64 \cdot {\mathrm{Ki}}}} \}\end{array} \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{allocmems}}({\mathit{s}}, \epsilon) &=& ({\mathit{s}},\, \epsilon) &  \\
{\mathrm{allocmems}}({\mathit{s}}, {\mathit{memtype}}~\,{{\mathit{memtype}'}^\ast}) &=& ({\mathit{s}}_{{2}},\, {\mathit{ma}}~\,{{\mathit{ma}'}^\ast}) &\quad
  \mbox{if}~({\mathit{s}}_{{1}},\, {\mathit{ma}}) = {\mathrm{allocmem}}({\mathit{s}}, {\mathit{memtype}}) \\
 &&&\quad {\land}~({\mathit{s}}_{{2}},\, {{\mathit{ma}'}^\ast}) = {\mathrm{allocmems}}({\mathit{s}}_{{1}}, {{\mathit{memtype}'}^\ast}) \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{instexport}}({{\mathit{fa}}^\ast}, {{\mathit{ga}}^\ast}, {{\mathit{ta}}^\ast}, {{\mathit{ma}}^\ast}, \mathsf{export}~\,{\mathit{name}}~\,(\mathsf{func}~\,{\mathit{x}})) &=& \{ \begin{array}[t]{@{}l@{}}
\mathsf{name}~\,{\mathit{name}},\; \mathsf{value}~\,(\mathsf{func}~\,{{\mathit{fa}}^\ast}{}[{\mathit{x}}]) \}\end{array} &  \\
{\mathrm{instexport}}({{\mathit{fa}}^\ast}, {{\mathit{ga}}^\ast}, {{\mathit{ta}}^\ast}, {{\mathit{ma}}^\ast}, \mathsf{export}~\,{\mathit{name}}~\,(\mathsf{global}~\,{\mathit{x}})) &=& \{ \begin{array}[t]{@{}l@{}}
\mathsf{name}~\,{\mathit{name}},\; \mathsf{value}~\,(\mathsf{global}~\,{{\mathit{ga}}^\ast}{}[{\mathit{x}}]) \}\end{array} &  \\
{\mathrm{instexport}}({{\mathit{fa}}^\ast}, {{\mathit{ga}}^\ast}, {{\mathit{ta}}^\ast}, {{\mathit{ma}}^\ast}, \mathsf{export}~\,{\mathit{name}}~\,(\mathsf{table}~\,{\mathit{x}})) &=& \{ \begin{array}[t]{@{}l@{}}
\mathsf{name}~\,{\mathit{name}},\; \mathsf{value}~\,(\mathsf{table}~\,{{\mathit{ta}}^\ast}{}[{\mathit{x}}]) \}\end{array} &  \\
{\mathrm{instexport}}({{\mathit{fa}}^\ast}, {{\mathit{ga}}^\ast}, {{\mathit{ta}}^\ast}, {{\mathit{ma}}^\ast}, \mathsf{export}~\,{\mathit{name}}~\,(\mathsf{mem}~\,{\mathit{x}})) &=& \{ \begin{array}[t]{@{}l@{}}
\mathsf{name}~\,{\mathit{name}},\; \mathsf{value}~\,(\mathsf{mem}~\,{{\mathit{ma}}^\ast}{}[{\mathit{x}}]) \}\end{array} &  \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{allocmodule}}({\mathit{s}}, {\mathit{module}}, {{\mathit{externval}}^\ast}, {{\mathit{val}}^\ast}) &=& ({\mathit{s}}_{{4}},\, {\mathit{mm}}) &\quad
  \mbox{if}~{\mathit{module}} = \mathsf{module}~\,{(\mathsf{type}~\,{\mathit{ft}})^\ast}~\,{{\mathit{import}}^\ast}~\,{{\mathit{func}}^{{\mathit{n}}_{{\mathit{func}}}}}~\,{(\mathsf{global}~\,{\mathit{globaltype}}~\,{\mathit{expr}}_{{1}})^{{\mathit{n}}_{{\mathit{global}}}}}~\,{(\mathsf{table}~\,{\mathit{tabletype}})^{{\mathit{n}}_{{\mathit{table}}}}}~\,{(\mathsf{memory}~\,{\mathit{memtype}})^{{\mathit{n}}_{{\mathit{mem}}}}}~\,{{\mathit{elem}}^\ast}~\,{{\mathit{data}}^\ast}~\,{{\mathit{start}}^?}~\,{{\mathit{export}}^\ast} \\
 &&&\quad {\land}~{{\mathit{fa}}_{{\mathit{ex}}}^\ast} = {\mathrm{funcs}}({{\mathit{externval}}^\ast}) \\
 &&&\quad {\land}~{{\mathit{ga}}_{{\mathit{ex}}}^\ast} = {\mathrm{globals}}({{\mathit{externval}}^\ast}) \\
 &&&\quad {\land}~{{\mathit{ta}}_{{\mathit{ex}}}^\ast} = {\mathrm{tables}}({{\mathit{externval}}^\ast}) \\
 &&&\quad {\land}~{{\mathit{ma}}_{{\mathit{ex}}}^\ast} = {\mathrm{mems}}({{\mathit{externval}}^\ast}) \\
 &&&\quad {\land}~{{\mathit{fa}}^\ast} = {{|{\mathit{s}}.\mathsf{func}|} + {\mathit{i}}_{{\mathit{func}}}^{{\mathit{i}}_{{\mathit{func}}}<{\mathit{n}}_{{\mathit{func}}}}} \\
 &&&\quad {\land}~{{\mathit{ga}}^\ast} = {{|{\mathit{s}}.\mathsf{global}|} + {\mathit{i}}_{{\mathit{global}}}^{{\mathit{i}}_{{\mathit{global}}}<{\mathit{n}}_{{\mathit{global}}}}} \\
 &&&\quad {\land}~{{\mathit{ta}}^\ast} = {{|{\mathit{s}}.\mathsf{table}|} + {\mathit{i}}_{{\mathit{table}}}^{{\mathit{i}}_{{\mathit{table}}}<{\mathit{n}}_{{\mathit{table}}}}} \\
 &&&\quad {\land}~{{\mathit{ma}}^\ast} = {{|{\mathit{s}}.\mathsf{mem}|} + {\mathit{i}}_{{\mathit{mem}}}^{{\mathit{i}}_{{\mathit{mem}}}<{\mathit{n}}_{{\mathit{mem}}}}} \\
 &&&\quad {\land}~{{\mathit{xi}}^\ast} = {{\mathrm{instexport}}({{\mathit{fa}}_{{\mathit{ex}}}^\ast}~\,{{\mathit{fa}}^\ast}, {{\mathit{ga}}_{{\mathit{ex}}}^\ast}~\,{{\mathit{ga}}^\ast}, {{\mathit{ta}}_{{\mathit{ex}}}^\ast}~\,{{\mathit{ta}}^\ast}, {{\mathit{ma}}_{{\mathit{ex}}}^\ast}~\,{{\mathit{ma}}^\ast}, {\mathit{export}})^\ast} \\
 &&&\quad {\land}~{\mathit{mm}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{{\mathit{ft}}^\ast},\; \\
  \mathsf{func}~\,{{\mathit{fa}}_{{\mathit{ex}}}^\ast}~\,{{\mathit{fa}}^\ast},\; \\
  \mathsf{global}~\,{{\mathit{ga}}_{{\mathit{ex}}}^\ast}~\,{{\mathit{ga}}^\ast},\; \\
  \mathsf{table}~\,{{\mathit{ta}}_{{\mathit{ex}}}^\ast}~\,{{\mathit{ta}}^\ast},\; \\
  \mathsf{mem}~\,{{\mathit{ma}}_{{\mathit{ex}}}^\ast}~\,{{\mathit{ma}}^\ast},\; \\
  \mathsf{export}~\,{{\mathit{xi}}^\ast} \}\end{array} \\
 &&&\quad {\land}~({\mathit{s}}_{{1}},\, {{\mathit{fa}}^\ast}) = {\mathrm{allocfuncs}}({\mathit{s}}, {\mathit{mm}}, {{\mathit{func}}^{{\mathit{n}}_{{\mathit{func}}}}}) \\
 &&&\quad {\land}~({\mathit{s}}_{{2}},\, {{\mathit{ga}}^\ast}) = {\mathrm{allocglobals}}({\mathit{s}}_{{1}}, {{\mathit{globaltype}}^{{\mathit{n}}_{{\mathit{global}}}}}, {{\mathit{val}}^\ast}) \\
 &&&\quad {\land}~({\mathit{s}}_{{3}},\, {{\mathit{ta}}^\ast}) = {\mathrm{alloctables}}({\mathit{s}}_{{2}}, {{\mathit{tabletype}}^{{\mathit{n}}_{{\mathit{table}}}}}) \\
 &&&\quad {\land}~({\mathit{s}}_{{4}},\, {{\mathit{ma}}^\ast}) = {\mathrm{allocmems}}({\mathit{s}}_{{3}}, {{\mathit{memtype}}^{{\mathit{n}}_{{\mathit{mem}}}}}) \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{initelem}}({\mathit{s}}, {\mathit{mm}}, \epsilon, \epsilon) &=& {\mathit{s}} &  \\
{\mathrm{initelem}}({\mathit{s}}, {\mathit{mm}}, {\mathit{i}}~\,{{\mathit{i}'}^\ast}, ({{\mathit{a}}^\ast})~\,{({{\mathit{a}'}^\ast})^\ast}) &=& {\mathit{s}}_{{2}} &\quad
  \mbox{if}~{\mathit{s}}_{{1}} = {\mathit{s}}{}[\mathsf{table}{}[{\mathit{mm}}.\mathsf{table}{}[0]].\mathsf{elem}{}[{\mathit{i}} : {|{{\mathit{a}}^\ast}|}] = {{\mathit{a}}^\ast}] \\
 &&&\quad {\land}~{\mathit{s}}_{{2}} = {\mathrm{initelem}}({\mathit{s}}_{{1}}, {\mathit{mm}}, {{\mathit{i}'}^\ast}, {({{\mathit{a}'}^\ast})^\ast}) \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{initdata}}({\mathit{s}}, {\mathit{mm}}, \epsilon, \epsilon) &=& {\mathit{s}} &  \\
{\mathrm{initdata}}({\mathit{s}}, {\mathit{mm}}, {\mathit{i}}~\,{{\mathit{i}'}^\ast}, ({{\mathit{b}}^\ast})~\,{({{\mathit{b}'}^\ast})^\ast}) &=& {\mathit{s}}_{{2}} &\quad
  \mbox{if}~{\mathit{s}}_{{1}} = {\mathit{s}}{}[\mathsf{mem}{}[{\mathit{mm}}.\mathsf{mem}{}[0]].\mathsf{data}{}[{\mathit{i}} : {|{{\mathit{b}}^\ast}|}] = {{\mathit{b}}^\ast}] \\
 &&&\quad {\land}~{\mathit{s}}_{{2}} = {\mathrm{initdata}}({\mathit{s}}_{{1}}, {\mathit{mm}}, {{\mathit{i}'}^\ast}, {({{\mathit{b}'}^\ast})^\ast}) \\
\end{array}
$$

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{instantiate}}({\mathit{s}}, {\mathit{module}}, {{\mathit{externval}}^\ast}) &=& {\mathit{s}}_{{3}} ; {\mathit{f}} ; {(\mathsf{call}~\,{\mathit{x}'})^?} &\quad
  \mbox{if}~{\mathit{module}} = \mathsf{module}~\,{{\mathit{type}}^\ast}~\,{{\mathit{import}}^\ast}~\,{{\mathit{func}}^\ast}~\,{{\mathit{global}}^\ast}~\,{{\mathit{table}}^\ast}~\,{{\mathit{mem}}^\ast}~\,{{\mathit{elem}}^\ast}~\,{{\mathit{data}}^\ast}~\,{{\mathit{start}}^?}~\,{{\mathit{export}}^\ast} \\
 &&&\quad {\land}~{{\mathit{type}}^\ast} = {(\mathsf{type}~\,{\mathit{functype}})^\ast} \\
 &&&\quad {\land}~{{\mathit{global}}^\ast} = {(\mathsf{global}~\,{\mathit{globaltype}}~\,{\mathit{expr}}_{{\mathsf{g}}})^\ast} \\
 &&&\quad {\land}~{{\mathit{elem}}^\ast} = {(\mathsf{elem}~\,{\mathit{expr}}_{{\mathit{E}}}~\,{{\mathit{x}}^\ast})^\ast} \\
 &&&\quad {\land}~{{\mathit{data}}^\ast} = {(\mathsf{data}~\,{\mathit{expr}}_{{\mathsf{d}}}~\,{{\mathit{b}}^\ast})^\ast} \\
 &&&\quad {\land}~{{\mathit{start}}^?} = {(\mathsf{start}~\,{\mathit{x}'})^?} \\
 &&&\quad {\land}~{\mathit{n}}_{{\mathsf{f}}} = {|{{\mathit{func}}^\ast}|} \\
 &&&\quad {\land}~{\mathit{mm}}_{{\mathit{init}}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{type}~\,{{\mathit{functype}}^\ast},\; \\
  \mathsf{func}~\,{\mathrm{funcs}}({{\mathit{externval}}^\ast})~\,{{|{\mathit{s}}.\mathsf{func}|} + {\mathit{i}}_{{\mathsf{f}}}^{{\mathit{i}}_{{\mathsf{f}}}<{\mathit{n}}_{{\mathsf{f}}}}},\; \\
  \mathsf{global}~\,{\mathrm{globals}}({{\mathit{externval}}^\ast}) \}\end{array} \\
 &&&\quad {\land}~{\mathit{f}}_{{\mathit{init}}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{local}~\,\epsilon,\; \mathsf{module}~\,{\mathit{mm}}_{{\mathit{init}}} \}\end{array} \\
 &&&\quad {\land}~{\mathit{z}} = {\mathit{s}} ; {\mathit{f}}_{{\mathit{init}}} \\
 &&&\quad {\land}~({\mathit{z}} ; {\mathit{expr}}_{{\mathsf{g}}} \hookrightarrow^\ast {\mathit{z}} ; {\mathit{val}})^\ast \\
 &&&\quad {\land}~({\mathit{z}} ; {\mathit{expr}}_{{\mathit{E}}} \hookrightarrow^\ast {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}}_{{\mathit{E}}}))^\ast \\
 &&&\quad {\land}~({\mathit{z}} ; {\mathit{expr}}_{{\mathsf{d}}} \hookrightarrow^\ast {\mathit{z}} ; (\mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{i}}_{{\mathsf{d}}}))^\ast \\
 &&&\quad {\land}~({\mathit{s}}_{{1}},\, {\mathit{mm}}) = {\mathrm{allocmodule}}({\mathit{s}}, {\mathit{module}}, {{\mathit{externval}}^\ast}, {{\mathit{val}}^\ast}) \\
 &&&\quad {\land}~{\mathit{s}}_{{2}} = {\mathrm{initelem}}({\mathit{s}}_{{1}}, {\mathit{mm}}, {{\mathit{i}}_{{\mathit{E}}}^\ast}, {{{\mathit{mm}}.\mathsf{func}{}[{\mathit{x}}]^\ast}^\ast}) \\
 &&&\quad {\land}~{\mathit{s}}_{{3}} = {\mathrm{initdata}}({\mathit{s}}_{{2}}, {\mathit{mm}}, {{\mathit{i}}_{{\mathsf{d}}}^\ast}, {{{\mathit{b}}^\ast}^\ast}) \\
 &&&\quad {\land}~{\mathit{f}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{local}~\,\epsilon,\; \mathsf{module}~\,{\mathit{mm}} \}\end{array} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{invoke}}({\mathit{s}}, {\mathit{fa}}, {{\mathit{val}}^{{\mathit{n}}}}) &=& {\mathit{s}} ; {\mathit{f}} ; {{\mathit{val}}^{{\mathit{n}}}}~\,(\mathsf{call}~\,{\mathit{fa}}) &\quad
  \mbox{if}~{\mathit{f}} = \{ \begin{array}[t]{@{}l@{}}
\mathsf{local}~\,\epsilon,\; \mathsf{module}~\,\{ \begin{array}[t]{@{}l@{}}
 \}\end{array} \}\end{array} \\
 &&&\quad {\land}~({\mathit{s}} ; {\mathit{f}}).\mathsf{func}{}[{\mathit{fa}}].\mathsf{type} = {{\mathit{t}}_{{1}}^{{\mathit{n}}}} \rightarrow {{\mathit{t}}_{{2}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{vec}}({\mathtt{X}}) &::=& {\mathit{n}}{:}{\mathtt{u{\scriptstyle32}}}~\,{({\mathit{el}}{:}{\mathtt{X}})^{{\mathit{n}}}} &\Rightarrow& {{\mathit{el}}^{{\mathit{n}}}} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{byte}} &::=& {\mathit{b}}{:}\mathtt{0x00} ~|~ \dots ~|~ {\mathit{b}}{:}\mathtt{0xFF} &\Rightarrow& {\mathit{b}} \\
& {{\mathtt{u}}}{{\mathit{N}}} &::=& {\mathit{n}}{:}{\mathtt{byte}} &\Rightarrow& {\mathit{n}} &\quad
  \mbox{if}~{\mathit{n}} < {2^{7}} \land {\mathit{n}} < {2^{{\mathit{N}}}} \\ &&|&
{\mathit{n}}{:}{\mathtt{byte}}~\,{\mathit{m}}{:}{{\mathtt{u}}}{({\mathit{N}} - 7)} &\Rightarrow& {2^{7}} \cdot {\mathit{m}} + ({\mathit{n}} - {2^{7}}) &\quad
  \mbox{if}~{\mathit{n}} \geq {2^{7}} \land {\mathit{N}} > 7 \\
& {{\mathtt{s}}}{{\mathit{N}}} &::=& {\mathit{n}}{:}{\mathtt{byte}} &\Rightarrow& {\mathit{n}} &\quad
  \mbox{if}~{\mathit{n}} < {2^{6}} \land {\mathit{n}} < {2^{{\mathit{N}} - 1}} \\ &&|&
{\mathit{n}}{:}{\mathtt{byte}} &\Rightarrow& {\mathit{n}} - {2^{7}} &\quad
  \mbox{if}~{2^{6}} \leq {\mathit{n}} < {2^{7}} \land {\mathit{n}} \geq {2^{7}} - {2^{{\mathit{N}} - 1}} \\ &&|&
{\mathit{n}}{:}{\mathtt{byte}}~\,{\mathit{i}}{:}{{\mathtt{u}}}{({\mathit{N}} - 7)} &\Rightarrow& {2^{7}} \cdot {\mathit{i}} + ({\mathit{n}} - {2^{7}}) &\quad
  \mbox{if}~{\mathit{n}} \geq {2^{7}} \land {\mathit{N}} > 7 \\
& {{\mathtt{i}}}{{\mathit{N}}} &::=& {\mathit{i}}{:}{{\mathtt{s}}}{{\mathit{N}}} &\Rightarrow& {{{{{\mathrm{signed}}^{{-1}}}}{}}_{{\mathit{N}}}}{{\mathit{i}}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {{\mathtt{f}}}{{\mathit{N}}} &::=& {{\mathit{b}}^\ast}{:}{{\mathtt{byte}}^{{\mathit{N}} / 8}} &\Rightarrow& {\mathrm{invfbytes}}({\mathit{N}}, {{\mathit{b}}^\ast}) \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{u{\scriptstyle32}}} &::=& {\mathit{n}}{:}{{\mathtt{u}}}{32} &\Rightarrow& {\mathit{n}} \\
& {\mathtt{u{\scriptstyle64}}} &::=& {\mathit{n}}{:}{{\mathtt{u}}}{64} &\Rightarrow& {\mathit{n}} \\
& {\mathtt{f{\scriptstyle32}}} &::=& {\mathit{p}}{:}{{\mathtt{f}}}{32} &\Rightarrow& {\mathit{p}} \\
& {\mathtt{f{\scriptstyle64}}} &::=& {\mathit{p}}{:}{{\mathtt{f}}}{64} &\Rightarrow& {\mathit{p}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lcl@{}l@{}}
{\mathrm{utf{\scriptstyle8}}}({\mathit{ch}}) &=& {\mathit{b}} &\quad
  \mbox{if}~{\mathit{ch}} < \mathrm{U{+}80} \land {\mathit{ch}} = {\mathit{b}} \\
{\mathrm{utf{\scriptstyle8}}}({\mathit{ch}}) &=& {\mathit{b}}_{{1}}~\,{\mathit{b}}_{{2}} &\quad
  \mbox{if}~\mathrm{U{+}80} \leq {\mathit{ch}} < \mathrm{U{+}0800} \land {\mathit{ch}} = {2^{6}} \cdot ({\mathit{b}}_{{1}} - \mathtt{0xC0}) + ({\mathit{b}}_{{2}} - \mathtt{0x80}) \\
{\mathrm{utf{\scriptstyle8}}}({\mathit{ch}}) &=& {\mathit{b}}_{{1}}~\,{\mathit{b}}_{{2}}~\,{\mathit{b}}_{{3}} &\quad
  \mbox{if}~(\mathrm{U{+}0800} \leq {\mathit{ch}} < \mathrm{U{+}D800} \lor \mathrm{U{+}E000} \leq {\mathit{ch}} < \mathrm{U{+}10000}) \land {\mathit{ch}} = {2^{12}} \cdot ({\mathit{b}}_{{1}} - \mathtt{0xE0}) + {2^{6}} \cdot ({\mathit{b}}_{{2}} - \mathtt{0x80}) + ({\mathit{b}}_{{3}} - \mathtt{0x80}) \\
{\mathrm{utf{\scriptstyle8}}}({\mathit{ch}}) &=& {\mathit{b}}_{{1}}~\,{\mathit{b}}_{{2}}~\,{\mathit{b}}_{{3}}~\,{\mathit{b}}_{{4}} &\quad
  \mbox{if}~(\mathrm{U{+}10000} \leq {\mathit{ch}} < \mathrm{U{+}11000}) \land {\mathit{ch}} = {2^{18}} \cdot ({\mathit{b}}_{{1}} - \mathtt{0xF0}) + {2^{12}} \cdot ({\mathit{b}}_{{2}} - \mathtt{0x80}) + {2^{6}} \cdot ({\mathit{b}}_{{3}} - \mathtt{0x80}) + ({\mathit{b}}_{{4}} - \mathtt{0x80}) \\
{\mathrm{utf{\scriptstyle8}}}({{\mathit{ch}}^\ast}) &=& {{\mathrm{concat}}}_{{\mathit{byte}}}({{\mathrm{utf{\scriptstyle8}}}({\mathit{ch}})^\ast}) &  \\
\end{array}
$$

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{name}} &::=& {{\mathit{b}}^\ast}{:}{\mathtt{vec}}({\mathtt{byte}}) &\Rightarrow& {\mathit{name}} &\quad
  \mbox{if}~{\mathrm{utf{\scriptstyle8}}}({\mathit{name}}) = {{\mathit{b}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{typeidx}} &::=& {\mathit{x}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {\mathit{x}} \\
& {\mathtt{funcidx}} &::=& {\mathit{x}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {\mathit{x}} \\
& {\mathtt{globalidx}} &::=& {\mathit{x}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {\mathit{x}} \\
& {\mathtt{tableidx}} &::=& {\mathit{x}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {\mathit{x}} \\
& {\mathtt{memidx}} &::=& {\mathit{x}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {\mathit{x}} \\
& {\mathtt{localidx}} &::=& {\mathit{x}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {\mathit{x}} \\
& {\mathtt{labelidx}} &::=& {\mathit{x}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {\mathit{x}} \\
& {\mathtt{externidx}} &::=& \mathtt{0x00}~\,{\mathit{x}}{:}{\mathtt{funcidx}} &\Rightarrow& \mathsf{func}~\,{\mathit{x}} \\ &&|&
\mathtt{0x01}~\,{\mathit{x}}{:}{\mathtt{tableidx}} &\Rightarrow& \mathsf{table}~\,{\mathit{x}} \\ &&|&
\mathtt{0x02}~\,{\mathit{x}}{:}{\mathtt{memidx}} &\Rightarrow& \mathsf{mem}~\,{\mathit{x}} \\ &&|&
\mathtt{0x03}~\,{\mathit{x}}{:}{\mathtt{globalidx}} &\Rightarrow& \mathsf{global}~\,{\mathit{x}} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{valtype}} &::=& \mathtt{0x7F} &\Rightarrow& \mathsf{i{\scriptstyle32}} \\ &&|&
\mathtt{0x7E} &\Rightarrow& \mathsf{i{\scriptstyle64}} \\ &&|&
\mathtt{0x7D} &\Rightarrow& \mathsf{f{\scriptstyle32}} \\ &&|&
\mathtt{0x7C} &\Rightarrow& \mathsf{f{\scriptstyle64}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{resulttype}} &::=& {{\mathit{t}}^\ast}{:}{\mathtt{vec}}({\mathtt{valtype}}) &\Rightarrow& {{\mathit{t}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{functype}} &::=& \mathtt{0x60}~\,{{\mathit{t}}_{{1}}^\ast}{:}{\mathtt{resulttype}}~\,{{\mathit{t}}_{{2}}^\ast}{:}{\mathtt{resulttype}} &\Rightarrow& {{\mathit{t}}_{{1}}^\ast} \rightarrow {{\mathit{t}}_{{2}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{mut}} &::=& \mathtt{0x00} &\Rightarrow& \epsilon \\ &&|&
\mathtt{0x01} &\Rightarrow& \mathsf{mut} \\
& {\mathtt{limits}} &::=& \mathtt{0x00}~\,{\mathit{n}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {}[{\mathit{n}} .. {2^{32}} - 1] \\ &&|&
\mathtt{0x01}~\,{\mathit{n}}{:}{\mathtt{u{\scriptstyle32}}}~\,{\mathit{m}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& {}[{\mathit{n}} .. {\mathit{m}}] \\
& {\mathtt{globaltype}} &::=& {\mathit{t}}{:}{\mathtt{valtype}}~\,{\mathit{mut}}{:}{\mathtt{mut}} &\Rightarrow& {\mathit{mut}}~\,{\mathit{t}} \\
& {\mathtt{tabletype}} &::=& \mathtt{0x70}~\,{\mathit{lim}}{:}{\mathtt{limits}} &\Rightarrow& {\mathit{lim}} \\
& {\mathtt{memtype}} &::=& {\mathit{lim}}{:}{\mathtt{limits}} &\Rightarrow& {\mathit{lim}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{externtype}} &::=& \mathtt{0x00}~\,{\mathit{ft}}{:}{\mathtt{functype}} &\Rightarrow& \mathsf{func}~\,{\mathit{ft}} \\ &&|&
\mathtt{0x01}~\,{\mathit{tt}}{:}{\mathtt{tabletype}} &\Rightarrow& \mathsf{table}~\,{\mathit{tt}} \\ &&|&
\mathtt{0x02}~\,{\mathit{mt}}{:}{\mathtt{memtype}} &\Rightarrow& \mathsf{mem}~\,{\mathit{mt}} \\ &&|&
\mathtt{0x03}~\,{\mathit{gt}}{:}{\mathtt{globaltype}} &\Rightarrow& \mathsf{global}~\,{\mathit{gt}} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{blocktype}} &::=& \mathtt{0x40} &\Rightarrow& \epsilon \\ &&|&
{\mathit{t}}{:}{\mathtt{valtype}} &\Rightarrow& {\mathit{t}} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{instr}} &::=& \mathtt{0x00} &\Rightarrow& \mathsf{unreachable} \\ &&|&
\mathtt{0x01} &\Rightarrow& \mathsf{nop} \\ &&|&
\mathtt{0x02}~\,{\mathit{bt}}{:}{\mathtt{blocktype}}~\,{({\mathit{in}}{:}{\mathtt{instr}})^\ast}~\,\mathtt{0x0B} &\Rightarrow& \mathsf{block}~\,{\mathit{bt}}~\,{{\mathit{in}}^\ast} \\ &&|&
\mathtt{0x03}~\,{\mathit{bt}}{:}{\mathtt{blocktype}}~\,{({\mathit{in}}{:}{\mathtt{instr}})^\ast}~\,\mathtt{0x0B} &\Rightarrow& \mathsf{loop}~\,{\mathit{bt}}~\,{{\mathit{in}}^\ast} \\ &&|&
\mathtt{0x04}~\,{\mathit{bt}}{:}{\mathtt{blocktype}}~\,{({\mathit{in}}{:}{\mathtt{instr}})^\ast}~\,\mathtt{0x0B} &\Rightarrow& \mathsf{if}~\,{\mathit{bt}}~\,{{\mathit{in}}^\ast}~\,\mathsf{else}~\,\epsilon \\ &&|&
\mathtt{0x04}~\,{\mathit{bt}}{:}{\mathtt{blocktype}}~\,{({\mathit{in}}_{{1}}{:}{\mathtt{instr}})^\ast}~\,\mathtt{0x05}~\,{({\mathit{in}}_{{2}}{:}{\mathtt{instr}})^\ast}~\,\mathtt{0x0B} &\Rightarrow& \mathsf{if}~\,{\mathit{bt}}~\,{{\mathit{in}}_{{1}}^\ast}~\,\mathsf{else}~\,{{\mathit{in}}_{{2}}^\ast} \\ &&|&
\mathtt{0x0C}~\,{\mathit{l}}{:}{\mathtt{labelidx}} &\Rightarrow& \mathsf{br}~\,{\mathit{l}} \\ &&|&
\mathtt{0x0D}~\,{\mathit{l}}{:}{\mathtt{labelidx}} &\Rightarrow& \mathsf{br\_if}~\,{\mathit{l}} \\ &&|&
\mathtt{0x0E}~\,{{\mathit{l}}^\ast}{:}{\mathtt{vec}}({\mathtt{labelidx}})~\,{\mathit{l}}_{{\mathit{N}}}{:}{\mathtt{labelidx}} &\Rightarrow& \mathsf{br\_table}~\,{{\mathit{l}}^\ast}~\,{\mathit{l}}_{{\mathit{N}}} \\ &&|&
\mathtt{0x0F} &\Rightarrow& \mathsf{return} \\ &&|&
\mathtt{0x10}~\,{\mathit{x}}{:}{\mathtt{funcidx}} &\Rightarrow& \mathsf{call}~\,{\mathit{x}} \\ &&|&
\mathtt{0x11}~\,{\mathit{x}}{:}{\mathtt{typeidx}}~\,\mathtt{0x00} &\Rightarrow& \mathsf{call\_indirect}~\,{\mathit{x}} \\ &&|&
\dots \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{instr}} &::=& \dots \\ &&|&
\mathtt{0x1A} &\Rightarrow& \mathsf{drop} \\ &&|&
\mathtt{0x1B} &\Rightarrow& \mathsf{select} \\ &&|&
\dots \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{instr}} &::=& \dots \\ &&|&
\mathtt{0x20}~\,{\mathit{x}}{:}{\mathtt{localidx}} &\Rightarrow& \mathsf{local.get}~\,{\mathit{x}} \\ &&|&
\mathtt{0x21}~\,{\mathit{x}}{:}{\mathtt{localidx}} &\Rightarrow& \mathsf{local.set}~\,{\mathit{x}} \\ &&|&
\mathtt{0x22}~\,{\mathit{x}}{:}{\mathtt{localidx}} &\Rightarrow& \mathsf{local.tee}~\,{\mathit{x}} \\ &&|&
\mathtt{0x23}~\,{\mathit{x}}{:}{\mathtt{globalidx}} &\Rightarrow& \mathsf{global.get}~\,{\mathit{x}} \\ &&|&
\mathtt{0x24}~\,{\mathit{x}}{:}{\mathtt{globalidx}} &\Rightarrow& \mathsf{global.set}~\,{\mathit{x}} \\ &&|&
\dots \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{memop}} &::=& {\mathit{n}}{:}{\mathtt{u{\scriptstyle32}}}~\,{\mathit{m}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& \{ \begin{array}[t]{@{}l@{}}
\mathsf{align}~\,{\mathit{n}},\; \mathsf{offset}~\,{\mathit{m}} \}\end{array} \\
& {\mathtt{instr}} &::=& \dots \\ &&|&
\mathtt{0x28}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& \mathsf{load}~\,\mathsf{i{\scriptstyle32}}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x29}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& \mathsf{load}~\,\mathsf{i{\scriptstyle64}}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x2A}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& \mathsf{load}~\,\mathsf{f{\scriptstyle32}}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x2B}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& \mathsf{load}~\,\mathsf{f{\scriptstyle64}}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x2C}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle32}}.\mathsf{load}}{(8~\,\mathsf{\_}~\,\mathsf{s})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x2D}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle32}}.\mathsf{load}}{(8~\,\mathsf{\_}~\,\mathsf{u})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x2E}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle32}}.\mathsf{load}}{(16~\,\mathsf{\_}~\,\mathsf{s})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x2F}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle32}}.\mathsf{load}}{(16~\,\mathsf{\_}~\,\mathsf{u})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x30}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{load}}{(8~\,\mathsf{\_}~\,\mathsf{s})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x31}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{load}}{(8~\,\mathsf{\_}~\,\mathsf{u})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x32}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{load}}{(16~\,\mathsf{\_}~\,\mathsf{s})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x33}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{load}}{(16~\,\mathsf{\_}~\,\mathsf{u})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x34}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{load}}{(32~\,\mathsf{\_}~\,\mathsf{s})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x35}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{load}}{(32~\,\mathsf{\_}~\,\mathsf{u})}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x36}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& \mathsf{store}~\,\mathsf{i{\scriptstyle32}}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x37}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& \mathsf{store}~\,\mathsf{i{\scriptstyle64}}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x38}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& \mathsf{store}~\,\mathsf{f{\scriptstyle32}}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x39}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& \mathsf{store}~\,\mathsf{f{\scriptstyle64}}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x3A}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle32}}.\mathsf{store}}{8}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x3B}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle32}}.\mathsf{store}}{16}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x3C}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{store}}{8}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x3D}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{store}}{16}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x3E}~\,{\mathit{mo}}{:}{\mathtt{memop}} &\Rightarrow& {\mathsf{i{\scriptstyle64}}.\mathsf{store}}{32}~\,{\mathit{mo}} \\ &&|&
\mathtt{0x3F}~\,\mathtt{0x00} &\Rightarrow& \mathsf{memory.size} \\ &&|&
\mathtt{0x40}~\,\mathtt{0x00} &\Rightarrow& \mathsf{memory.grow} \\ &&|&
\dots \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{instr}} &::=& \dots \\ &&|&
\mathtt{0x41}~\,{\mathit{n}}{:}{\mathtt{u{\scriptstyle32}}} &\Rightarrow& \mathsf{i{\scriptstyle32}}.\mathsf{const}~\,{\mathit{n}} \\ &&|&
\mathtt{0x42}~\,{\mathit{n}}{:}{\mathtt{u{\scriptstyle64}}} &\Rightarrow& \mathsf{i{\scriptstyle64}}.\mathsf{const}~\,{\mathit{n}} \\ &&|&
\mathtt{0x45} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{eqz} \\ &&|&
\mathtt{0x46} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{eq} \\ &&|&
\mathtt{0x47} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{ne} \\ &&|&
\mathtt{0x48} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{lt\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x49} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{lt\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x4A} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{gt\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x4B} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{gt\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x4C} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{le\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x4D} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{le\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x4E} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{ge\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x4F} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{ge\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x50} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{eqz} \\ &&|&
\mathtt{0x51} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{eq} \\ &&|&
\mathtt{0x52} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{ne} \\ &&|&
\mathtt{0x53} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{lt\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x54} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{lt\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x55} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{gt\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x56} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{gt\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x57} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{le\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x58} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{le\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x59} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{ge\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x5A} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{ge\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x5B} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{eq} \\ &&|&
\mathtt{0x5C} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{ne} \\ &&|&
\mathtt{0x5D} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{lt} \\ &&|&
\mathtt{0x5E} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{gt} \\ &&|&
\mathtt{0x5F} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{le} \\ &&|&
\mathtt{0x60} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{ge} \\ &&|&
\mathtt{0x61} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{eq} \\ &&|&
\mathtt{0x62} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{ne} \\ &&|&
\mathtt{0x63} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{lt} \\ &&|&
\mathtt{0x64} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{gt} \\ &&|&
\mathtt{0x65} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{le} \\ &&|&
\mathtt{0x66} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{ge} \\ &&|&
\mathtt{0x67} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{clz} \\ &&|&
\mathtt{0x68} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{ctz} \\ &&|&
\mathtt{0x69} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{popcnt} \\ &&|&
\mathtt{0x6A} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{add} \\ &&|&
\mathtt{0x6B} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{sub} \\ &&|&
\mathtt{0x6C} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{mul} \\ &&|&
\mathtt{0x6D} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{div\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x6E} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{div\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x6F} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{rem\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x70} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{rem\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x71} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{and} \\ &&|&
\mathtt{0x72} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{or} \\ &&|&
\mathtt{0x73} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{xor} \\ &&|&
\mathtt{0x74} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{shl} \\ &&|&
\mathtt{0x75} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{shr\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x76} &\Rightarrow& \mathsf{i{\scriptstyle32}} . ({\mathsf{shr\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x77} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{rotl} \\ &&|&
\mathtt{0x78} &\Rightarrow& \mathsf{i{\scriptstyle32}} . \mathsf{rotr} \\ &&|&
\mathtt{0x79} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{clz} \\ &&|&
\mathtt{0x7A} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{ctz} \\ &&|&
\mathtt{0x7B} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{popcnt} \\ &&|&
\mathtt{0x7C} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{add} \\ &&|&
\mathtt{0x7D} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{sub} \\ &&|&
\mathtt{0x7E} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{mul} \\ &&|&
\mathtt{0x7F} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{div\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x80} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{div\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x81} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{rem\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x82} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{rem\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x83} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{and} \\ &&|&
\mathtt{0x84} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{or} \\ &&|&
\mathtt{0x85} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{xor} \\ &&|&
\mathtt{0x86} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{shl} \\ &&|&
\mathtt{0x87} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{shr\_}}{\mathsf{s}}) \\ &&|&
\mathtt{0x88} &\Rightarrow& \mathsf{i{\scriptstyle64}} . ({\mathsf{shr\_}}{\mathsf{u}}) \\ &&|&
\mathtt{0x89} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{rotl} \\ &&|&
\mathtt{0x8A} &\Rightarrow& \mathsf{i{\scriptstyle64}} . \mathsf{rotr} \\ &&|&
\mathtt{0x8B} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{abs} \\ &&|&
\mathtt{0x8C} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{neg} \\ &&|&
\mathtt{0x8D} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{ceil} \\ &&|&
\mathtt{0x8E} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{floor} \\ &&|&
\mathtt{0x8F} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{trunc} \\ &&|&
\mathtt{0x90} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{nearest} \\ &&|&
\mathtt{0x91} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{sqrt} \\ &&|&
\mathtt{0x92} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{add} \\ &&|&
\mathtt{0x93} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{sub} \\ &&|&
\mathtt{0x94} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{mul} \\ &&|&
\mathtt{0x95} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{div} \\ &&|&
\mathtt{0x96} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{min} \\ &&|&
\mathtt{0x97} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{max} \\ &&|&
\mathtt{0x98} &\Rightarrow& \mathsf{f{\scriptstyle32}} . \mathsf{copysign} \\ &&|&
\mathtt{0x99} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{abs} \\ &&|&
\mathtt{0x9A} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{neg} \\ &&|&
\mathtt{0x9B} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{ceil} \\ &&|&
\mathtt{0x9C} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{floor} \\ &&|&
\mathtt{0x9D} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{trunc} \\ &&|&
\mathtt{0x9E} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{nearest} \\ &&|&
\mathtt{0x9F} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{sqrt} \\ &&|&
\mathtt{0xA0} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{add} \\ &&|&
\mathtt{0xA1} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{sub} \\ &&|&
\mathtt{0xA2} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{mul} \\ &&|&
\mathtt{0xA3} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{div} \\ &&|&
\mathtt{0xA4} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{min} \\ &&|&
\mathtt{0xA5} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{max} \\ &&|&
\mathtt{0xA6} &\Rightarrow& \mathsf{f{\scriptstyle64}} . \mathsf{copysign} \\ &&|&
\dots \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{instr}} &::=& \dots \\ &&|&
\mathtt{0xA7} &\Rightarrow& \mathsf{cvtop}~\,\mathsf{i{\scriptstyle32}}~\,\mathsf{convert}~\,\mathsf{i{\scriptstyle64}} \\ &&|&
\mathtt{0xA8} &\Rightarrow& \mathsf{i{\scriptstyle32}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{f{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xA9} &\Rightarrow& \mathsf{i{\scriptstyle32}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{f{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xAA} &\Rightarrow& \mathsf{i{\scriptstyle32}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{f{\scriptstyle64}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xAB} &\Rightarrow& \mathsf{i{\scriptstyle32}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{f{\scriptstyle64}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xAC} &\Rightarrow& \mathsf{i{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xAD} &\Rightarrow& \mathsf{i{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xAE} &\Rightarrow& \mathsf{i{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{f{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xAF} &\Rightarrow& \mathsf{i{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{f{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xB0} &\Rightarrow& \mathsf{i{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{f{\scriptstyle64}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xB1} &\Rightarrow& \mathsf{i{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{f{\scriptstyle64}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xB2} &\Rightarrow& \mathsf{f{\scriptstyle32}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xB3} &\Rightarrow& \mathsf{f{\scriptstyle32}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xB4} &\Rightarrow& \mathsf{f{\scriptstyle32}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle64}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xB5} &\Rightarrow& \mathsf{f{\scriptstyle32}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle64}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xB6} &\Rightarrow& \mathsf{cvtop}~\,\mathsf{f{\scriptstyle32}}~\,\mathsf{convert}~\,\mathsf{f{\scriptstyle64}} \\ &&|&
\mathtt{0xB7} &\Rightarrow& \mathsf{f{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xB8} &\Rightarrow& \mathsf{f{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle32}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xB9} &\Rightarrow& \mathsf{f{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle64}}}}{\mathsf{\_}}}{\mathsf{s}} \\ &&|&
\mathtt{0xBA} &\Rightarrow& \mathsf{f{\scriptstyle64}} . {{{{\mathsf{convert}}{\mathsf{\_}}}{\mathsf{i{\scriptstyle64}}}}{\mathsf{\_}}}{\mathsf{u}} \\ &&|&
\mathtt{0xBB} &\Rightarrow& \mathsf{cvtop}~\,\mathsf{f{\scriptstyle64}}~\,\mathsf{convert}~\,\mathsf{f{\scriptstyle32}} \\ &&|&
\mathtt{0xBC} &\Rightarrow& \mathsf{cvtop}~\,\mathsf{i{\scriptstyle32}}~\,\mathsf{reinterpret}~\,\mathsf{f{\scriptstyle32}} \\ &&|&
\mathtt{0xBD} &\Rightarrow& \mathsf{cvtop}~\,\mathsf{i{\scriptstyle64}}~\,\mathsf{reinterpret}~\,\mathsf{f{\scriptstyle64}} \\ &&|&
\mathtt{0xBE} &\Rightarrow& \mathsf{cvtop}~\,\mathsf{f{\scriptstyle32}}~\,\mathsf{reinterpret}~\,\mathsf{i{\scriptstyle32}} \\ &&|&
\mathtt{0xBF} &\Rightarrow& \mathsf{cvtop}~\,\mathsf{f{\scriptstyle64}}~\,\mathsf{reinterpret}~\,\mathsf{i{\scriptstyle64}} \\ &&|&
\dots \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{expr}} &::=& {({\mathit{in}}{:}{\mathtt{instr}})^\ast}~\,\mathtt{0x0B} &\Rightarrow& {{\mathit{in}}^\ast} \\
\end{array}
$$

\vspace{1ex}

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {{\mathtt{section}}}_{{\mathit{N}}}({\mathtt{X}}) &::=& {\mathit{N}}{:}{\mathtt{byte}}~\,{\mathit{sz}}{:}{\mathtt{u{\scriptstyle32}}}~\,{{\mathit{en}}^\ast}{:}{\mathtt{X}} &\Rightarrow& {{\mathit{en}}^\ast} &\quad
  \mbox{if}~{\mathit{sz}} = ||{\mathtt{X}}|| \\ &&|&
\epsilon &\Rightarrow& \epsilon \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{custom}} &::=& {\mathtt{name}}~\,{{\mathtt{byte}}^\ast} &\Rightarrow& () \\
& {\mathtt{customsec}} &::=& {{\mathtt{section}}}_{0}({\mathtt{custom}}) &\Rightarrow& () \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{type}} &::=& {\mathit{ft}}{:}{\mathtt{functype}} &\Rightarrow& \mathsf{type}~\,{\mathit{ft}} \\
& {\mathtt{typesec}} &::=& {{\mathit{ty}}^\ast}{:}{{\mathtt{section}}}_{1}({\mathtt{vec}}({\mathtt{type}})) &\Rightarrow& {{\mathit{ty}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{import}} &::=& {\mathit{nm}}_{{1}}{:}{\mathtt{name}}~\,{\mathit{nm}}_{{2}}{:}{\mathtt{name}}~\,{\mathit{xt}}{:}{\mathtt{externtype}} &\Rightarrow& \mathsf{import}~\,{\mathit{nm}}_{{1}}~\,{\mathit{nm}}_{{2}}~\,{\mathit{xt}} \\
& {\mathtt{importsec}} &::=& {{\mathit{im}}^\ast}{:}{{\mathtt{section}}}_{2}({\mathtt{vec}}({\mathtt{import}})) &\Rightarrow& {{\mathit{im}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{funcsec}} &::=& {{\mathit{x}}^\ast}{:}{{\mathtt{section}}}_{3}({\mathtt{vec}}({\mathtt{typeidx}})) &\Rightarrow& {{\mathit{x}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{table}} &::=& {\mathit{tt}}{:}{\mathtt{tabletype}} &\Rightarrow& \mathsf{table}~\,{\mathit{tt}} \\
& {\mathtt{tablesec}} &::=& {{\mathit{tab}}^\ast}{:}{{\mathtt{section}}}_{4}({\mathtt{vec}}({\mathtt{table}})) &\Rightarrow& {{\mathit{tab}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{mem}} &::=& {\mathit{mt}}{:}{\mathtt{memtype}} &\Rightarrow& \mathsf{memory}~\,{\mathit{mt}} \\
& {\mathtt{memsec}} &::=& {{\mathit{mem}}^\ast}{:}{{\mathtt{section}}}_{5}({\mathtt{vec}}({\mathtt{mem}})) &\Rightarrow& {{\mathit{mem}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{global}} &::=& {\mathit{gt}}{:}{\mathtt{globaltype}}~\,{\mathit{e}}{:}{\mathtt{expr}} &\Rightarrow& \mathsf{global}~\,{\mathit{gt}}~\,{\mathit{e}} \\
& {\mathtt{globalsec}} &::=& {{\mathit{glob}}^\ast}{:}{{\mathtt{section}}}_{6}({\mathtt{vec}}({\mathtt{global}})) &\Rightarrow& {{\mathit{glob}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{export}} &::=& {\mathit{nm}}{:}{\mathtt{name}}~\,{\mathit{xx}}{:}{\mathtt{externidx}} &\Rightarrow& \mathsf{export}~\,{\mathit{nm}}~\,{\mathit{xx}} \\
& {\mathtt{exportsec}} &::=& {{\mathit{ex}}^\ast}{:}{{\mathtt{section}}}_{7}({\mathtt{vec}}({\mathtt{export}})) &\Rightarrow& {{\mathit{ex}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{start}} &::=& {\mathit{x}}{:}{\mathtt{funcidx}} &\Rightarrow& (\mathsf{start}~\,{\mathit{x}}) \\
& {\mathtt{startsec}} &::=& {{\mathit{st}}^\ast}{:}{{\mathtt{section}}}_{8}({\mathtt{start}}) &\Rightarrow& {{\mathit{st}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{elem}} &::=& \mathtt{0x00}~\,{\mathit{e}}{:}{\mathtt{expr}}~\,{{\mathit{x}}^\ast}{:}{\mathtt{vec}}({\mathtt{funcidx}}) &\Rightarrow& \mathsf{elem}~\,{\mathit{e}}~\,{{\mathit{x}}^\ast} \\
& {\mathtt{elemsec}} &::=& {{\mathit{elem}}^\ast}{:}{{\mathtt{section}}}_{9}({\mathtt{vec}}({\mathtt{elem}})) &\Rightarrow& {{\mathit{elem}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}lrrl@{}l@{}}
& {\mathit{code}} &::=& ({{\mathit{local}}^\ast},\, {\mathit{expr}}) \\
\end{array}
$$

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{locals}} &::=& {\mathit{n}}{:}{\mathtt{u{\scriptstyle32}}}~\,{\mathit{t}}{:}{\mathtt{valtype}} &\Rightarrow& {(\mathsf{local}~\,{\mathit{t}})^{{\mathit{n}}}} \\
& {\mathtt{func}} &::=& {{{\mathit{local}}^\ast}^\ast}{:}{\mathtt{vec}}({\mathtt{locals}})~\,{\mathit{expr}}{:}{\mathtt{expr}} &\Rightarrow& ({{\mathrm{concat}}}_{{\mathit{local}}}({{{\mathit{local}}^\ast}^\ast}),\, {\mathit{expr}}) \\
& {\mathtt{code}} &::=& {\mathit{sz}}{:}{\mathtt{u{\scriptstyle32}}}~\,{\mathit{code}}{:}{\mathtt{func}} &\Rightarrow& {\mathit{code}} &\quad
  \mbox{if}~{\mathit{sz}} = ||{\mathtt{func}}|| \\
& {\mathtt{codesec}} &::=& {{\mathit{code}}^\ast}{:}{{\mathtt{section}}}_{10}({\mathtt{vec}}({\mathtt{code}})) &\Rightarrow& {{\mathit{code}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{data}} &::=& \mathtt{0x00}~\,{\mathit{e}}{:}{\mathtt{expr}}~\,{{\mathit{b}}^\ast}{:}{\mathtt{vec}}({\mathtt{byte}}) &\Rightarrow& \mathsf{data}~\,{\mathit{e}}~\,{{\mathit{b}}^\ast} \\
& {\mathtt{datasec}} &::=& {{\mathit{data}}^\ast}{:}{{\mathtt{section}}}_{11}({\mathtt{vec}}({\mathtt{data}})) &\Rightarrow& {{\mathit{data}}^\ast} \\
\end{array}
$$

\vspace{1ex}

$$
\begin{array}{@{}l@{}rrlll@{}l@{}}
& {\mathtt{module}} &::=& \mathtt{0x00}~\,\mathtt{0x61}~\,\mathtt{0x73}~\,\mathtt{0x6D}~\,1{:}{\mathtt{u{\scriptstyle32}}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{type}}^\ast}{:}{\mathtt{typesec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{import}}^\ast}{:}{\mathtt{importsec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{typeidx}}^{{\mathit{n}}}}{:}{\mathtt{funcsec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{table}}^\ast}{:}{\mathtt{tablesec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{mem}}^\ast}{:}{\mathtt{memsec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{global}}^\ast}{:}{\mathtt{globalsec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{export}}^\ast}{:}{\mathtt{exportsec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{start}}^\ast}{:}{\mathtt{startsec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{elem}}^\ast}{:}{\mathtt{elemsec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{({{\mathit{local}}^\ast},\, {\mathit{expr}})^{{\mathit{n}}}}{:}{\mathtt{codesec}}~\,{{\mathtt{customsec}}^\ast} \\ &&&{{\mathit{data}}^\ast}{:}{\mathtt{datasec}}~\,{{\mathtt{customsec}}^\ast} &\Rightarrow& \mathsf{module}~\,{{\mathit{type}}^\ast}~\,{{\mathit{import}}^\ast}~\,{{\mathit{func}}^{{\mathit{n}}}}~\,{{\mathit{global}}^\ast}~\,{{\mathit{table}}^\ast}~\,{{\mathit{mem}}^\ast}~\,{{\mathit{elem}}^\ast}~\,{{\mathit{data}}^\ast}~\,{{\mathit{start}}^\ast}~\,{{\mathit{export}}^\ast} &\quad
  \mbox{if}~(({\mathit{func}} = \mathsf{func}~\,{\mathit{typeidx}}~\,{{\mathit{local}}^\ast}~\,{\mathit{expr}}))^{{\mathit{n}}} \\
\end{array}
$$

